{"ast":null,"code":"/**\r\n * DevExtreme (ui/box.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _events_engine = require(\"../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _component_registrator = require(\"../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _window = require(\"../core/utils/window\");\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _inflector = require(\"../core/utils/inflector\");\n\nvar _inflector2 = _interopRequireDefault(_inflector);\n\nvar _type = require(\"../core/utils/type\");\n\nvar _style = require(\"../core/utils/style\");\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _browser = require(\"../core/utils/browser\");\n\nvar _browser2 = _interopRequireDefault(_browser);\n\nvar _item = require(\"./collection/item\");\n\nvar _item2 = _interopRequireDefault(_item);\n\nvar _uiCollection_widget = require(\"./collection/ui.collection_widget.edit\");\n\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (\"undefined\" !== typeof Reflect && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function (target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) {\n        return;\n      }\n\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n\n    if (null === object) {\n      break;\n    }\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" !== typeof superClass && null !== superClass) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    _setPrototypeOf(subClass, superClass);\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var result,\n        Super = _getPrototypeOf(Derived);\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (\"object\" === _typeof(call) || \"function\" === typeof call)) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (\"undefined\" === typeof Reflect || !Reflect.construct) {\n    return false;\n  }\n\n  if (Reflect.construct.sham) {\n    return false;\n  }\n\n  if (\"function\" === typeof Proxy) {\n    return true;\n  }\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar BOX_CLASS = \"dx-box\";\nvar BOX_SELECTOR = \".dx-box\";\nvar BOX_ITEM_CLASS = \"dx-box-item\";\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\nvar MINSIZE_MAP = {\n  row: \"minWidth\",\n  col: \"minHeight\"\n};\nvar MAXSIZE_MAP = {\n  row: \"maxWidth\",\n  col: \"maxHeight\"\n};\nvar SHRINK = 1;\nvar FLEX_JUSTIFY_CONTENT_MAP = {\n  start: \"flex-start\",\n  end: \"flex-end\",\n  center: \"center\",\n  \"space-between\": \"space-between\",\n  \"space-around\": \"space-around\"\n};\nvar FLEX_ALIGN_ITEMS_MAP = {\n  start: \"flex-start\",\n  end: \"flex-end\",\n  center: \"center\",\n  stretch: \"stretch\"\n};\nvar FLEX_DIRECTION_MAP = {\n  row: \"row\",\n  col: \"column\"\n};\n\nvar setFlexProp = function (element, prop, value) {\n  value = _style2.default.normalizeStyleProp(prop, value);\n  element.style[_style2.default.styleProp(prop)] = value;\n\n  if (!_window2.default.hasWindow()) {\n    if (\"\" === value || !(0, _type.isDefined)(value)) {\n      return;\n    }\n\n    var cssName = _inflector2.default.dasherize(prop);\n\n    var styleExpr = cssName + \": \" + value + \";\";\n\n    if (!element.attributes.style) {\n      element.setAttribute(\"style\", styleExpr);\n    } else {\n      if (element.attributes.style.value.indexOf(styleExpr) < 0) {\n        element.attributes.style.value += \" \" + styleExpr;\n      }\n    }\n  }\n};\n\nvar BOX_EVENTNAMESPACE = \"dxBox\";\nvar UPDATE_EVENT = \"dxupdate.\" + BOX_EVENTNAMESPACE;\nvar FALLBACK_BOX_ITEM = \"dx-box-fallback-item\";\nvar FALLBACK_WRAP_MAP = {\n  row: \"nowrap\",\n  col: \"normal\"\n};\nvar FALLBACK_MAIN_SIZE_MAP = {\n  row: \"width\",\n  col: \"height\"\n};\nvar FALLBACK_CROSS_SIZE_MAP = {\n  row: \"height\",\n  col: \"width\"\n};\nvar FALLBACK_PRE_MARGIN_MAP = {\n  row: \"marginLeft\",\n  col: \"marginTop\"\n};\nvar FALLBACK_POST_MARGIN_MAP = {\n  row: \"marginRight\",\n  col: \"marginBottom\"\n};\nvar FALLBACK_CROSS_PRE_MARGIN_MAP = {\n  row: \"marginTop\",\n  col: \"marginLeft\"\n};\nvar FALLBACK_CROSS_POST_MARGIN_MAP = {\n  row: \"marginBottom\",\n  col: \"marginRight\"\n};\nvar MARGINS_RTL_FLIP_MAP = {\n  marginLeft: \"marginRight\",\n  marginRight: \"marginLeft\"\n};\n\nvar BoxItem = function (_CollectionWidgetItem) {\n  _inherits(BoxItem, _CollectionWidgetItem);\n\n  var _super = _createSuper(BoxItem);\n\n  function BoxItem() {\n    _classCallCheck(this, BoxItem);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(BoxItem, [{\n    key: \"_renderVisible\",\n    value: function (value, oldValue) {\n      _get(_getPrototypeOf(BoxItem.prototype), \"_renderVisible\", this).call(this, value);\n\n      if ((0, _type.isDefined)(oldValue)) {\n        this._options.fireItemStateChangedAction({\n          name: \"visible\",\n          state: value,\n          oldState: oldValue\n        });\n      }\n    }\n  }]);\n\n  return BoxItem;\n}(_item2.default);\n\nvar FlexLayoutStrategy = function () {\n  function FlexLayoutStrategy($element, option) {\n    _classCallCheck(this, FlexLayoutStrategy);\n\n    this._$element = $element;\n    this._option = option;\n    this.initSize = _common.noop;\n    this.update = _common.noop;\n  }\n\n  _createClass(FlexLayoutStrategy, [{\n    key: \"renderBox\",\n    value: function () {\n      this._$element.css({\n        display: _style2.default.stylePropPrefix(\"flexDirection\") + \"flex\"\n      });\n\n      setFlexProp(this._$element.get(0), \"flexDirection\", FLEX_DIRECTION_MAP[this._option(\"direction\")]);\n    }\n  }, {\n    key: \"renderAlign\",\n    value: function () {\n      this._$element.css({\n        justifyContent: this._normalizedAlign()\n      });\n    }\n  }, {\n    key: \"_normalizedAlign\",\n    value: function () {\n      var align = this._option(\"align\");\n\n      return align in FLEX_JUSTIFY_CONTENT_MAP ? FLEX_JUSTIFY_CONTENT_MAP[align] : align;\n    }\n  }, {\n    key: \"renderCrossAlign\",\n    value: function () {\n      this._$element.css({\n        alignItems: this._normalizedCrossAlign()\n      });\n    }\n  }, {\n    key: \"_normalizedCrossAlign\",\n    value: function () {\n      var crossAlign = this._option(\"crossAlign\");\n\n      return crossAlign in FLEX_ALIGN_ITEMS_MAP ? FLEX_ALIGN_ITEMS_MAP[crossAlign] : crossAlign;\n    }\n  }, {\n    key: \"renderItems\",\n    value: function ($items) {\n      var flexPropPrefix = _style2.default.stylePropPrefix(\"flexDirection\");\n\n      var direction = this._option(\"direction\");\n\n      (0, _iterator.each)($items, function () {\n        var $item = (0, _renderer2.default)(this);\n        var item = $item.data(BOX_ITEM_DATA_KEY);\n        $item.css({\n          display: flexPropPrefix + \"flex\"\n        }).css(MAXSIZE_MAP[direction], item.maxSize || \"none\").css(MINSIZE_MAP[direction], item.minSize || \"0\");\n        setFlexProp($item.get(0), \"flexBasis\", item.baseSize || 0);\n        setFlexProp($item.get(0), \"flexGrow\", item.ratio);\n        setFlexProp($item.get(0), \"flexShrink\", (0, _type.isDefined)(item.shrink) ? item.shrink : SHRINK);\n        $item.children().each(function (_, itemContent) {\n          (0, _renderer2.default)(itemContent).css({\n            width: \"auto\",\n            height: \"auto\",\n            display: _style2.default.stylePropPrefix(\"flexDirection\") + \"flex\",\n            flexBasis: 0\n          });\n          setFlexProp(itemContent, \"flexGrow\", 1);\n          setFlexProp(itemContent, \"flexDirection\", (0, _renderer2.default)(itemContent)[0].style.flexDirection || \"column\");\n        });\n      });\n    }\n  }]);\n\n  return FlexLayoutStrategy;\n}();\n\nvar FallbackLayoutStrategy = function () {\n  function FallbackLayoutStrategy($element, option) {\n    _classCallCheck(this, FallbackLayoutStrategy);\n\n    this._$element = $element;\n    this._option = option;\n  }\n\n  _createClass(FallbackLayoutStrategy, [{\n    key: \"renderBox\",\n    value: function () {\n      this._$element.css({\n        fontSize: 0,\n        whiteSpace: FALLBACK_WRAP_MAP[this._option(\"direction\")],\n        verticalAlign: \"top\"\n      });\n\n      _events_engine2.default.off(this._$element, UPDATE_EVENT);\n\n      _events_engine2.default.on(this._$element, UPDATE_EVENT, this.update.bind(this));\n    }\n  }, {\n    key: \"renderAlign\",\n    value: function () {\n      var $items = this._$items;\n\n      if (!$items) {\n        return;\n      }\n\n      var align = this._option(\"align\");\n\n      var totalItemSize = this.totalItemSize;\n\n      var direction = this._option(\"direction\");\n\n      var boxSize = this._$element[FALLBACK_MAIN_SIZE_MAP[direction]]();\n\n      var freeSpace = boxSize - totalItemSize;\n      var shift = 0;\n\n      this._setItemsMargins($items, direction, 0);\n\n      switch (align) {\n        case \"start\":\n          break;\n\n        case \"end\":\n          shift = freeSpace;\n          $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\n          break;\n\n        case \"center\":\n          shift = .5 * freeSpace;\n          $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\n          $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\n          break;\n\n        case \"space-between\":\n          shift = .5 * freeSpace / ($items.length - 1);\n\n          this._setItemsMargins($items, direction, shift);\n\n          $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), 0);\n          $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), 0);\n          break;\n\n        case \"space-around\":\n          shift = .5 * freeSpace / $items.length;\n\n          this._setItemsMargins($items, direction, shift);\n\n      }\n    }\n  }, {\n    key: \"_setItemsMargins\",\n    value: function ($items, direction, shift) {\n      $items.css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift).css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\n    }\n  }, {\n    key: \"renderCrossAlign\",\n    value: function () {\n      var $items = this._$items;\n\n      if (!$items) {\n        return;\n      }\n\n      var crossAlign = this._option(\"crossAlign\");\n\n      var direction = this._option(\"direction\");\n\n      var size = this._$element[FALLBACK_CROSS_SIZE_MAP[direction]]();\n\n      var that = this;\n\n      switch (crossAlign) {\n        case \"start\":\n          break;\n\n        case \"end\":\n          (0, _iterator.each)($items, function () {\n            var $item = (0, _renderer2.default)(this);\n            var itemSize = $item[FALLBACK_CROSS_SIZE_MAP[direction]]();\n            var shift = size - itemSize;\n            $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift);\n          });\n          break;\n\n        case \"center\":\n          (0, _iterator.each)($items, function () {\n            var $item = (0, _renderer2.default)(this);\n            var itemSize = $item[FALLBACK_CROSS_SIZE_MAP[direction]]();\n            var shift = .5 * (size - itemSize);\n            $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), shift);\n          });\n          break;\n\n        case \"stretch\":\n          $items.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), 0).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), 0).css(FALLBACK_CROSS_SIZE_MAP[direction], \"100%\");\n      }\n    }\n  }, {\n    key: \"_chooseMarginSide\",\n    value: function (value) {\n      if (!this._option(\"rtlEnabled\")) {\n        return value;\n      }\n\n      return MARGINS_RTL_FLIP_MAP[value] || value;\n    }\n  }, {\n    key: \"renderItems\",\n    value: function ($items) {\n      var _this = this;\n\n      this._$items = $items;\n\n      var direction = this._option(\"direction\");\n\n      var totalRatio = 0;\n      var totalWeightedShrink = 0;\n      var totalBaseSize = 0;\n      (0, _iterator.each)($items, function (_, item) {\n        var $item = (0, _renderer2.default)(item);\n        $item.css({\n          display: \"inline-block\",\n          verticalAlign: \"top\"\n        });\n        $item[FALLBACK_MAIN_SIZE_MAP[direction]](\"auto\");\n        $item.removeClass(FALLBACK_BOX_ITEM);\n        var itemData = $item.data(BOX_ITEM_DATA_KEY);\n        var ratio = itemData.ratio || 0;\n\n        var size = _this._baseSize($item);\n\n        var shrink = (0, _type.isDefined)(itemData.shrink) ? itemData.shrink : SHRINK;\n        totalRatio += ratio;\n        totalWeightedShrink += shrink * size;\n        totalBaseSize += size;\n      });\n      var freeSpaceSize = this._boxSize() - totalBaseSize;\n\n      var itemSize = function ($item) {\n        var itemData = $item.data(BOX_ITEM_DATA_KEY);\n\n        var size = _this._baseSize($item);\n\n        var factor = freeSpaceSize >= 0 ? itemData.ratio || 0 : ((0, _type.isDefined)(itemData.shrink) ? itemData.shrink : SHRINK) * size;\n        var totalFactor = freeSpaceSize >= 0 ? totalRatio : totalWeightedShrink;\n        var shift = totalFactor ? Math.round(freeSpaceSize * factor / totalFactor) : 0;\n        return size + shift;\n      };\n\n      var totalItemSize = 0;\n      (0, _iterator.each)($items, function (_, item) {\n        var $item = (0, _renderer2.default)(item);\n        var itemData = (0, _renderer2.default)(item).data(BOX_ITEM_DATA_KEY);\n        var size = itemSize($item);\n        totalItemSize += size;\n        $item.css(MAXSIZE_MAP[direction], itemData.maxSize || \"none\").css(MINSIZE_MAP[direction], itemData.minSize || \"0\").css(FALLBACK_MAIN_SIZE_MAP[direction], size);\n        $item.addClass(FALLBACK_BOX_ITEM);\n      });\n      this.totalItemSize = totalItemSize;\n    }\n  }, {\n    key: \"_baseSize\",\n    value: function (item) {\n      var itemData = (0, _renderer2.default)(item).data(BOX_ITEM_DATA_KEY);\n      return null == itemData.baseSize ? 0 : \"auto\" === itemData.baseSize ? this._contentSize(item) : this._parseSize(itemData.baseSize);\n    }\n  }, {\n    key: \"_contentSize\",\n    value: function (item) {\n      return (0, _renderer2.default)(item)[FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")]]();\n    }\n  }, {\n    key: \"_parseSize\",\n    value: function (size) {\n      return String(size).match(/.+%$/) ? .01 * parseFloat(size) * this._boxSizeValue : size;\n    }\n  }, {\n    key: \"_boxSize\",\n    value: function (value) {\n      if (!arguments.length) {\n        this._boxSizeValue = this._boxSizeValue || this._totalBaseSize();\n        return this._boxSizeValue;\n      }\n\n      this._boxSizeValue = value;\n    }\n  }, {\n    key: \"_totalBaseSize\",\n    value: function () {\n      var _this2 = this;\n\n      var result = 0;\n      (0, _iterator.each)(this._$items, function (_, item) {\n        result += _this2._baseSize(item);\n      });\n      return result;\n    }\n  }, {\n    key: \"initSize\",\n    value: function () {\n      this._boxSize(this._$element[FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")]]());\n    }\n  }, {\n    key: \"update\",\n    value: function () {\n      if (!this._$items || this._$element.is(\":hidden\")) {\n        return;\n      }\n\n      this._$items.detach();\n\n      this.initSize();\n\n      this._$element.append(this._$items);\n\n      this.renderItems(this._$items);\n      this.renderAlign();\n      this.renderCrossAlign();\n\n      var element = this._$element.get(0);\n\n      this._$items.find(BOX_SELECTOR).each(function () {\n        if (element === (0, _renderer2.default)(this).parent().closest(BOX_SELECTOR).get(0)) {\n          _events_engine2.default.triggerHandler(this, UPDATE_EVENT);\n        }\n      });\n    }\n  }]);\n\n  return FallbackLayoutStrategy;\n}();\n\nvar Box = function (_CollectionWidget) {\n  _inherits(Box, _CollectionWidget);\n\n  var _super2 = _createSuper(Box);\n\n  function Box() {\n    _classCallCheck(this, Box);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Box, [{\n    key: \"_getDefaultOptions\",\n    value: function () {\n      return (0, _extend.extend)(_get(_getPrototypeOf(Box.prototype), \"_getDefaultOptions\", this).call(this), {\n        direction: \"row\",\n        align: \"start\",\n        crossAlign: \"stretch\",\n        activeStateEnabled: false,\n        focusStateEnabled: false,\n        onItemStateChanged: void 0,\n        _layoutStrategy: \"flex\",\n        _queue: void 0\n      });\n    }\n  }, {\n    key: \"_defaultOptionsRules\",\n    value: function () {\n      return _get(_getPrototypeOf(Box.prototype), \"_defaultOptionsRules\", this).call(this).concat([{\n        device: function () {\n          return _browser2.default.msie;\n        },\n        options: {\n          _layoutStrategy: \"fallback\"\n        }\n      }]);\n    }\n  }, {\n    key: \"_itemClass\",\n    value: function () {\n      return BOX_ITEM_CLASS;\n    }\n  }, {\n    key: \"_itemDataKey\",\n    value: function () {\n      return BOX_ITEM_DATA_KEY;\n    }\n  }, {\n    key: \"_itemElements\",\n    value: function () {\n      return this._itemContainer().children(this._itemSelector());\n    }\n  }, {\n    key: \"_init\",\n    value: function () {\n      _get(_getPrototypeOf(Box.prototype), \"_init\", this).call(this);\n\n      this.$element().addClass(\"\".concat(BOX_CLASS, \"-\").concat(this.option(\"_layoutStrategy\")));\n\n      this._initLayout();\n\n      this._initBoxQueue();\n    }\n  }, {\n    key: \"_initLayout\",\n    value: function () {\n      this._layout = \"fallback\" === this.option(\"_layoutStrategy\") ? new FallbackLayoutStrategy(this.$element(), this.option.bind(this)) : new FlexLayoutStrategy(this.$element(), this.option.bind(this));\n    }\n  }, {\n    key: \"_initBoxQueue\",\n    value: function () {\n      this._queue = this.option(\"_queue\") || [];\n    }\n  }, {\n    key: \"_queueIsNotEmpty\",\n    value: function () {\n      return this.option(\"_queue\") ? false : !!this._queue.length;\n    }\n  }, {\n    key: \"_pushItemToQueue\",\n    value: function ($item, config) {\n      this._queue.push({\n        $item: $item,\n        config: config\n      });\n    }\n  }, {\n    key: \"_shiftItemFromQueue\",\n    value: function () {\n      return this._queue.shift();\n    }\n  }, {\n    key: \"_initMarkup\",\n    value: function () {\n      this.$element().addClass(BOX_CLASS);\n\n      this._layout.renderBox();\n\n      _get(_getPrototypeOf(Box.prototype), \"_initMarkup\", this).call(this);\n\n      this._renderAlign();\n\n      this._renderActions();\n    }\n  }, {\n    key: \"_renderActions\",\n    value: function () {\n      this._onItemStateChanged = this._createActionByOption(\"onItemStateChanged\");\n    }\n  }, {\n    key: \"_renderAlign\",\n    value: function () {\n      this._layout.renderAlign();\n\n      this._layout.renderCrossAlign();\n    }\n  }, {\n    key: \"_renderItems\",\n    value: function (items) {\n      var _this3 = this;\n\n      this._layout.initSize();\n\n      _get(_getPrototypeOf(Box.prototype), \"_renderItems\", this).call(this, items);\n\n      while (this._queueIsNotEmpty()) {\n        var item = this._shiftItemFromQueue();\n\n        this._createComponent(item.$item, Box, (0, _extend.extend)({\n          _layoutStrategy: this.option(\"_layoutStrategy\"),\n          itemTemplate: this.option(\"itemTemplate\"),\n          itemHoldTimeout: this.option(\"itemHoldTimeout\"),\n          onItemHold: this.option(\"onItemHold\"),\n          onItemClick: this.option(\"onItemClick\"),\n          onItemContextMenu: this.option(\"onItemContextMenu\"),\n          onItemRendered: this.option(\"onItemRendered\"),\n          _queue: this._queue\n        }, item.config));\n      }\n\n      this._layout.renderItems(this._itemElements());\n\n      clearTimeout(this._updateTimer);\n      this._updateTimer = setTimeout(function () {\n        if (!_this3._isUpdated) {\n          _this3._layout.update();\n        }\n\n        _this3._isUpdated = false;\n        _this3._updateTimer = null;\n      });\n    }\n  }, {\n    key: \"_renderItemContent\",\n    value: function (args) {\n      var $itemNode = args.itemData && args.itemData.node;\n\n      if ($itemNode) {\n        return this._renderItemContentByNode(args, $itemNode);\n      }\n\n      return _get(_getPrototypeOf(Box.prototype), \"_renderItemContent\", this).call(this, args);\n    }\n  }, {\n    key: \"_postprocessRenderItem\",\n    value: function (args) {\n      var boxConfig = args.itemData.box;\n\n      if (!boxConfig) {\n        return;\n      }\n\n      this._pushItemToQueue(args.itemContent, boxConfig);\n    }\n  }, {\n    key: \"_createItemByTemplate\",\n    value: function (itemTemplate, args) {\n      if (args.itemData.box) {\n        return itemTemplate.source ? itemTemplate.source() : (0, _renderer2.default)();\n      }\n\n      return _get(_getPrototypeOf(Box.prototype), \"_createItemByTemplate\", this).call(this, itemTemplate, args);\n    }\n  }, {\n    key: \"_visibilityChanged\",\n    value: function (visible) {\n      if (visible) {\n        this._dimensionChanged();\n      }\n    }\n  }, {\n    key: \"_dimensionChanged\",\n    value: function () {\n      if (this._updateTimer) {\n        return;\n      }\n\n      this._isUpdated = true;\n\n      this._layout.update();\n    }\n  }, {\n    key: \"_dispose\",\n    value: function () {\n      clearTimeout(this._updateTimer);\n\n      _get(_getPrototypeOf(Box.prototype), \"_dispose\", this).apply(this, arguments);\n    }\n  }, {\n    key: \"_itemOptionChanged\",\n    value: function (item, property, value, oldValue) {\n      if (\"visible\" === property) {\n        this._onItemStateChanged({\n          name: property,\n          state: value,\n          oldState: false !== oldValue\n        });\n      }\n\n      _get(_getPrototypeOf(Box.prototype), \"_itemOptionChanged\", this).call(this, item, property, value);\n    }\n  }, {\n    key: \"_optionChanged\",\n    value: function (args) {\n      switch (args.name) {\n        case \"_layoutStrategy\":\n        case \"_queue\":\n        case \"direction\":\n          this._invalidate();\n\n          break;\n\n        case \"align\":\n          this._layout.renderAlign();\n\n          break;\n\n        case \"crossAlign\":\n          this._layout.renderCrossAlign();\n\n          break;\n\n        default:\n          _get(_getPrototypeOf(Box.prototype), \"_optionChanged\", this).call(this, args);\n\n      }\n    }\n  }, {\n    key: \"_itemOptions\",\n    value: function () {\n      var _this4 = this;\n\n      var options = _get(_getPrototypeOf(Box.prototype), \"_itemOptions\", this).call(this);\n\n      options.fireItemStateChangedAction = function (e) {\n        _this4._onItemStateChanged(e);\n      };\n\n      return options;\n    }\n  }, {\n    key: \"repaint\",\n    value: function () {\n      this._dimensionChanged();\n    }\n  }]);\n\n  return Box;\n}(_uiCollection_widget2.default);\n\nBox.ItemClass = BoxItem;\n(0, _component_registrator2.default)(\"dxBox\", Box);\nmodule.exports = Box;\nmodule.exports.default = module.exports;","map":null,"metadata":{},"sourceType":"script"}