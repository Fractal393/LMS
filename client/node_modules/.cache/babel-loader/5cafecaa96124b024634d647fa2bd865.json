{"ast":null,"code":"/**\r\n * DevExtreme (ui/date_box/ui.date_box.strategy.date_view.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../../core/renderer\");\n\nvar window = require(\"../../core/utils/window\").getWindow();\n\nvar DateView = require(\"./ui.date_view\");\n\nvar DateBoxStrategy = require(\"./ui.date_box.strategy\");\n\nvar support = require(\"../../core/utils/support\");\n\nvar extend = require(\"../../core/utils/extend\").extend;\n\nvar dateUtils = require(\"./ui.date_utils\");\n\nvar messageLocalization = require(\"../../localization/message\");\n\nvar DateViewStrategy = DateBoxStrategy.inherit({\n  NAME: \"DateView\",\n  getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      openOnFieldClick: true,\n      applyButtonText: messageLocalization.format(\"OK\"),\n      \"dropDownOptions.showTitle\": true\n    });\n  },\n  getDisplayFormat: function (displayFormat) {\n    return displayFormat || dateUtils.FORMATS_MAP[this.dateBox.option(\"type\")];\n  },\n  popupConfig: function (config) {\n    return {\n      toolbarItems: this.dateBox._popupToolbarItemsConfig(),\n      onInitialized: config.onInitialized,\n      defaultOptionsRules: [{\n        device: {\n          platform: \"android\"\n        },\n        options: {\n          width: 333,\n          height: 331\n        }\n      }, {\n        device: function (_device) {\n          var platform = _device.platform;\n          return \"generic\" === platform || \"ios\" === platform;\n        },\n        options: {\n          width: \"auto\",\n          height: \"auto\"\n        }\n      }, {\n        device: function (_device2) {\n          var platform = _device2.platform;\n          var phone = _device2.phone;\n          return \"generic\" === platform && phone;\n        },\n        options: {\n          width: 333,\n          maxWidth: \"100%\",\n          maxHeight: \"100%\",\n          height: \"auto\",\n          position: {\n            collision: \"flipfit flip\"\n          }\n        }\n      }, {\n        device: {\n          platform: \"ios\",\n          phone: true\n        },\n        options: {\n          width: \"100%\",\n          position: {\n            my: \"bottom\",\n            at: \"bottom\",\n            of: window\n          }\n        }\n      }]\n    };\n  },\n  _renderWidget: function () {\n    if (support.inputType(this.dateBox.option(\"mode\")) && this.dateBox._isNativeType() || this.dateBox.option(\"readOnly\")) {\n      if (this._widget) {\n        this._widget.$element().remove();\n\n        this._widget = null;\n      }\n\n      return;\n    }\n\n    var popup = this._getPopup();\n\n    if (this._widget) {\n      this._widget.option(this._getWidgetOptions());\n    } else {\n      var element = $(\"<div>\").appendTo(popup.$content());\n      this._widget = this._createWidget(element);\n    }\n\n    this._widget.$element().appendTo(this._getWidgetContainer());\n  },\n  _getWidgetName: function () {\n    return DateView;\n  },\n  renderOpenedState: function () {\n    this.callBase();\n\n    if (this._widget) {\n      this._widget.option(\"value\", this._widget._getCurrentDate());\n    }\n  },\n  _getWidgetOptions: function () {\n    return {\n      value: this.dateBoxValue() || new Date(),\n      type: this.dateBox.option(\"type\"),\n      minDate: this.dateBox.dateOption(\"min\") || new Date(1900, 0, 1),\n      maxDate: this.dateBox.dateOption(\"max\") || new Date(Date.now() + 50 * dateUtils.ONE_YEAR),\n      onDisposing: function () {\n        this._widget = null;\n      }.bind(this)\n    };\n  }\n});\nmodule.exports = DateViewStrategy;","map":null,"metadata":{},"sourceType":"script"}