{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { isNullOrUndefined, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\n\nvar HeaderCellRenderer =\n/** @class */\nfunction (_super) {\n  __extends(HeaderCellRenderer, _super);\n\n  function HeaderCellRenderer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.element = _this.parent.createElement('TH', {\n      className: 'e-headercell',\n      attrs: {\n        role: 'columnheader',\n        tabindex: '-1'\n      }\n    });\n    _this.ariaService = new AriaService();\n    _this.hTxtEle = _this.parent.createElement('span', {\n      className: 'e-headertext'\n    });\n    _this.sortEle = _this.parent.createElement('div', {\n      className: 'e-sortfilterdiv e-icons'\n    });\n    _this.gui = _this.parent.createElement('div');\n    _this.chkAllBox = _this.parent.createElement('input', {\n      className: 'e-checkselectall',\n      attrs: {\n        'type': 'checkbox'\n      }\n    });\n    return _this;\n  }\n  /**\n   * Function to return the wrapper for the TH content.\n   * @returns string\n   */\n\n\n  HeaderCellRenderer.prototype.getGui = function () {\n    return this.gui.cloneNode();\n  };\n  /**\n   * Function to render the cell content based on Column object.\n   * @param  {Column} column\n   * @param  {Object} data\n   * @param  {Element}\n   */\n\n\n  HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n    var node = this.element.cloneNode();\n    var fltrMenuEle = this.parent.createElement('div', {\n      className: 'e-filtermenudiv e-icons e-icon-filter'\n    });\n    return this.prepareHeader(cell, node, fltrMenuEle);\n  };\n  /**\n   * Function to refresh the cell content based on Column object.\n   * @param  {Cell} cell\n   * @param  {Element} node\n   */\n\n\n  HeaderCellRenderer.prototype.refresh = function (cell, node) {\n    this.clean(node);\n    var fltrMenuEle = this.parent.createElement('div', {\n      className: 'e-filtermenudiv e-icons e-icon-filter'\n    });\n    return this.prepareHeader(cell, node, fltrMenuEle);\n  };\n\n  HeaderCellRenderer.prototype.clean = function (node) {\n    node.innerHTML = '';\n  };\n\n  HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n    var column = cell.column;\n    var ariaAttr = {}; //Prepare innerHtml\n\n    var innerDIV = this.getGui();\n    var hValueAccer;\n    attributes(innerDIV, {\n      'e-mappinguid': column.uid,\n      'class': 'e-headercelldiv'\n    });\n\n    if (!isNullOrUndefined(column.headerValueAccessor)) {\n      hValueAccer = this.getValue(column.headerText, column);\n    }\n\n    if (column.type !== 'checkbox') {\n      var value = column.headerText;\n\n      if (!isNullOrUndefined(hValueAccer)) {\n        value = hValueAccer;\n      }\n\n      var headerText = this.hTxtEle.cloneNode();\n      headerText[column.getDomSetter()] = value;\n      innerDIV.appendChild(headerText);\n    } else {\n      column.editType = 'booleanedit';\n      var checkAllWrap = createCheckBox(this.parent.createElement, false, {\n        checked: false,\n        label: ' '\n      });\n      checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n      innerDIV.appendChild(checkAllWrap);\n      innerDIV.classList.add('e-headerchkcelldiv');\n    }\n\n    this.buildAttributeFromCell(node, cell);\n    this.appendHtml(node, innerDIV);\n    node.appendChild(this.sortEle.cloneNode());\n\n    if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && column.allowFiltering && !isNullOrUndefined(column.field) && !(this.parent.showColumnMenu && column.showColumnMenu)) {\n      attributes(fltrMenuEle, {\n        'e-mappinguid': 'e-flmenu-' + column.uid\n      });\n      node.classList.add('e-fltr-icon');\n      var matchFlColumns = [];\n\n      if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n        for (var index = 0; index < this.parent.columns.length; index++) {\n          for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n            if (this.parent.filterSettings.columns[count].field === column.field) {\n              fltrMenuEle.classList.add('e-filtered');\n              matchFlColumns.push(column.field);\n              break;\n            }\n          }\n        }\n      }\n\n      node.appendChild(fltrMenuEle.cloneNode());\n    }\n\n    if (cell.className) {\n      node.classList.add(cell.className);\n    }\n\n    if (column.customAttributes) {\n      setStyleAndAttributes(node, column.customAttributes);\n    }\n\n    if (column.allowSorting) {\n      ariaAttr.sort = 'none';\n    }\n\n    if (column.allowGrouping) {\n      ariaAttr.grabbed = false;\n    }\n\n    node = this.extendPrepareHeader(column, node);\n    var result;\n    var gridObj = this.parent;\n    var colIndex = gridObj.getColumnIndexByField(column.field);\n\n    if (!isNullOrUndefined(column.headerTemplate)) {\n      //need to pass the template id for blazor headertemplate\n      var headerTempID = gridObj.element.id + column.uid + 'headerTemplate';\n      var str = 'isStringTemplate';\n      var col = isBlazor() ? column.toJSON() : column;\n      result = column.getHeaderTemplate()(extend({\n        'index': colIndex\n      }, col), gridObj, 'headerTemplate', headerTempID, this.parent[str]);\n      node.firstElementChild.innerHTML = '';\n      appendChildren(node.firstElementChild, result);\n    }\n\n    this.ariaService.setOptions(node, ariaAttr);\n\n    if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n      var alignment = column.headerTextAlign || column.textAlign;\n      innerDIV.style.textAlign = alignment;\n\n      if (alignment === 'Right' || alignment === 'Left') {\n        node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n      } else if (alignment === 'Center') {\n        node.classList.add('e-centeralign');\n      }\n    }\n\n    if (column.clipMode === 'Clip' || !column.clipMode && this.parent.clipMode === 'Clip') {\n      node.classList.add('e-gridclip');\n    } else if (column.clipMode === 'EllipsisWithTooltip' || !column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip') {\n      if (column.type !== 'checkbox') {\n        node.classList.add('e-ellipsistooltip');\n      }\n    }\n\n    node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n    node.setAttribute('aria-colspan', '1');\n    this.parent.trigger(headerCellInfo, {\n      cell: cell,\n      node: node\n    });\n    return node;\n  };\n\n  HeaderCellRenderer.prototype.getValue = function (field, column) {\n    return column.headerValueAccessor(field, column);\n  };\n\n  HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n    if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n      var element = this.parent.createElement('div', {\n        className: 'e-icons e-columnmenu'\n      });\n      var matchFilteredColumns = [];\n\n      if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n        for (var i = 0; i < this.parent.columns.length; i++) {\n          for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n            if (this.parent.filterSettings.columns[j].field === column.field) {\n              element.classList.add('e-filtered');\n              matchFilteredColumns.push(column.field);\n              break;\n            }\n          }\n        }\n      }\n\n      node.classList.add('e-fltr-icon');\n      node.appendChild(element);\n    }\n\n    if (this.parent.allowResizing) {\n      var handler = this.parent.createElement('div');\n      handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n      node.appendChild(handler);\n    }\n\n    return node;\n  };\n  /**\n   * Function to specifies how the result content to be placed in the cell.\n   * @param  {Element} node\n   * @param  {string|Element} innerHtml\n   * @returns Element\n   */\n\n\n  HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n    node.appendChild(innerHtml);\n    return node;\n  };\n\n  return HeaderCellRenderer;\n}(CellRenderer);\n\nexport { HeaderCellRenderer };","map":null,"metadata":{},"sourceType":"module"}