{"ast":null,"code":"\"use strict\";\n/**\n * @author Timur Kuzhagaliyev <tim.kuzh@gmail.com>\n * @copyright 2020\n * @license MIT\n */\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DnDFileListDragLayer = void 0;\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_dnd_1 = require(\"react-dnd\");\n\nvar recoil_1 = require(\"recoil\");\n\nvar selection_recoil_1 = require(\"../../recoil/selection.recoil\");\n\nvar DnDFileEntry_1 = require(\"./DnDFileEntry\");\n\nvar layerStyles = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 100,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%'\n};\n\nvar getItemStyles = function (initialCursorOffset, initialFileOffset, currentFileOffset) {\n  if (!initialCursorOffset || !initialFileOffset || !currentFileOffset) {\n    return {\n      display: 'none'\n    };\n  }\n\n  var x = initialCursorOffset.x + (currentFileOffset.x - initialFileOffset.x);\n  var y = initialCursorOffset.y + (currentFileOffset.y - initialFileOffset.y);\n  var transform = \"translate(\" + x + \"px, \" + y + \"px)\";\n  return {\n    transform: transform,\n    WebkitTransform: transform\n  };\n};\n\nexports.DnDFileListDragLayer = function () {\n  var selectionSize = recoil_1.useRecoilValue(selection_recoil_1.selectionSizeState);\n\n  var _a = react_dnd_1.useDragLayer(function (monitor) {\n    return {\n      item: monitor.getItem(),\n      itemType: monitor.getItemType(),\n      initialCursorOffset: monitor.getInitialClientOffset(),\n      initialFileOffset: monitor.getInitialSourceClientOffset(),\n      currentFileOffset: monitor.getSourceClientOffset(),\n      isDragging: monitor.isDragging()\n    };\n  }),\n      itemType = _a.itemType,\n      item = _a.item,\n      initialCursorOffset = _a.initialCursorOffset,\n      initialFileOffset = _a.initialFileOffset,\n      currentFileOffset = _a.currentFileOffset,\n      isDragging = _a.isDragging;\n\n  function renderItem() {\n    if (!item.file || itemType !== DnDFileEntry_1.DnDFileEntryType) return;\n    return react_1.default.createElement(\"div\", {\n      className: \"chonky-file-drag-preview\"\n    }, react_1.default.createElement(\"b\", null, item.file.name), selectionSize > 1 && react_1.default.createElement(react_1.default.Fragment, null, ' and ', react_1.default.createElement(\"strong\", null, selectionSize - 1, \" other file\", selectionSize - 1 !== 1 ? 's' : '')));\n  }\n\n  if (!isDragging) {\n    return null;\n  }\n\n  return react_1.default.createElement(\"div\", {\n    style: layerStyles\n  }, react_1.default.createElement(\"div\", {\n    style: getItemStyles(initialCursorOffset, initialFileOffset, currentFileOffset)\n  }, renderItem()));\n};","map":null,"metadata":{},"sourceType":"script"}