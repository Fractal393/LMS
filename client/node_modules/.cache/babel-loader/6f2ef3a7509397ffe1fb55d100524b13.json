{"ast":null,"code":"/**\r\n * DevExtreme (ui/text_box/ui.text_editor.base.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar _renderer = require(\"../../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _dom_adapter = require(\"../../core/dom_adapter\");\n\nvar _dom_adapter2 = _interopRequireDefault(_dom_adapter);\n\nvar _events_engine = require(\"../../events/core/events_engine\");\n\nvar _events_engine2 = _interopRequireDefault(_events_engine);\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _dom2 = _interopRequireDefault(_dom);\n\nvar _selectors = require(\"../widget/selectors\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _devices = require(\"../../core/devices\");\n\nvar _devices2 = _interopRequireDefault(_devices);\n\nvar _themes = require(\"../themes\");\n\nvar _themes2 = _interopRequireDefault(_themes);\n\nvar _editor = require(\"../editor/editor\");\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _utils = require(\"../../events/utils\");\n\nvar eventUtils = _interopRequireWildcard(_utils);\n\nvar _pointer = require(\"../../events/pointer\");\n\nvar _pointer2 = _interopRequireDefault(_pointer);\n\nvar _uiText_editor = require(\"./ui.text_editor.clear\");\n\nvar _uiText_editor2 = _interopRequireDefault(_uiText_editor);\n\nvar _index = require(\"./texteditor_button_collection/index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _config = require(\"../../core/config\");\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _ui = require(\"../widget/ui.errors\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _load_indicator = require(\"../load_indicator\");\n\nvar _load_indicator2 = _interopRequireDefault(_load_indicator);\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar TEXTEDITOR_CLASS = \"dx-texteditor\";\nvar TEXTEDITOR_INPUT_CONTAINER_CLASS = \"dx-texteditor-input-container\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar TEXTEDITOR_INPUT_SELECTOR = \".\" + TEXTEDITOR_INPUT_CLASS;\nvar TEXTEDITOR_CONTAINER_CLASS = \"dx-texteditor-container\";\nvar TEXTEDITOR_BUTTONS_CONTAINER_CLASS = \"dx-texteditor-buttons-container\";\nvar TEXTEDITOR_PLACEHOLDER_CLASS = \"dx-placeholder\";\nvar TEXTEDITOR_EMPTY_INPUT_CLASS = \"dx-texteditor-empty\";\nvar TEXTEDITOR_STYLING_MODE_PREFIX = \"dx-editor-\";\nvar ALLOWED_STYLE_CLASSES = [TEXTEDITOR_STYLING_MODE_PREFIX + \"outlined\", TEXTEDITOR_STYLING_MODE_PREFIX + \"filled\", TEXTEDITOR_STYLING_MODE_PREFIX + \"underlined\"];\nvar STATE_INVISIBLE_CLASS = \"dx-state-invisible\";\nvar TEXTEDITOR_PENDING_INDICATOR_CLASS = \"dx-pending-indicator\";\nvar TEXTEDITOR_VALIDATION_PENDING_CLASS = \"dx-validation-pending\";\nvar TEXTEDITOR_VALID_CLASS = \"dx-valid\";\nvar EVENTS_LIST = [\"KeyDown\", \"KeyPress\", \"KeyUp\", \"Change\", \"Cut\", \"Copy\", \"Paste\", \"Input\"];\nvar CONTROL_KEYS = [\"tab\", \"enter\", \"shift\", \"control\", \"alt\", \"escape\", \"pageUp\", \"pageDown\", \"end\", \"home\", \"leftArrow\", \"upArrow\", \"rightArrow\", \"downArrow\"];\n\nfunction checkButtonsOptionType(buttons) {\n  if ((0, _type.isDefined)(buttons) && !Array.isArray(buttons)) {\n    throw _ui2.default.Error(\"E1053\");\n  }\n}\n\nvar TextEditorBase = _editor2.default.inherit({\n  ctor: function (_, options) {\n    if (options) {\n      checkButtonsOptionType(options.buttons);\n    }\n\n    this._buttonCollection = new _index2.default(this, this._getDefaultButtons());\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this.callBase.apply(this, arguments);\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      buttons: void 0,\n      value: \"\",\n      spellcheck: false,\n      showClearButton: false,\n      valueChangeEvent: \"change\",\n      placeholder: \"\",\n      inputAttr: {},\n      onFocusIn: null,\n      onFocusOut: null,\n      onKeyDown: null,\n      onKeyPress: null,\n      onKeyUp: null,\n      onChange: null,\n      onInput: null,\n      onCut: null,\n      onCopy: null,\n      onPaste: null,\n      onEnterKey: null,\n      mode: \"text\",\n      hoverStateEnabled: true,\n      focusStateEnabled: true,\n      text: void 0,\n      displayValueFormatter: function (value) {\n        return (0, _type.isDefined)(value) && false !== value ? value : \"\";\n      },\n      stylingMode: (0, _config2.default)().editorStylingMode || \"outlined\",\n      showValidationMark: true\n    });\n  },\n  _defaultOptionsRules: function () {\n    var themeName = _themes2.default.current();\n\n    return this.callBase().concat([{\n      device: function () {\n        return _themes2.default.isMaterial(themeName);\n      },\n      options: {\n        stylingMode: (0, _config2.default)().editorStylingMode || \"underlined\"\n      }\n    }]);\n  },\n  _setDeprecatedOptions: function () {\n    this.callBase();\n    (0, _extend.extend)(this._deprecatedOptions, {\n      onKeyPress: {\n        since: \"20.1\",\n        message: \"This event is removed from the web standards and will be deprecated in modern browsers soon.\"\n      }\n    });\n  },\n  _getDefaultButtons: function () {\n    return [{\n      name: \"clear\",\n      Ctor: _uiText_editor2.default\n    }];\n  },\n  _isClearButtonVisible: function () {\n    return this.option(\"showClearButton\") && !this.option(\"readOnly\");\n  },\n  _input: function () {\n    return this.$element().find(TEXTEDITOR_INPUT_SELECTOR).first();\n  },\n  _isFocused: function () {\n    return (0, _selectors.focused)(this._input()) || this.callBase();\n  },\n  _inputWrapper: function () {\n    return this.$element();\n  },\n  _buttonsContainer: function () {\n    return this._inputWrapper().find(\".\" + TEXTEDITOR_BUTTONS_CONTAINER_CLASS).eq(0);\n  },\n  _isControlKey: function (key) {\n    return CONTROL_KEYS.indexOf(key) !== -1;\n  },\n  _renderStylingMode: function () {\n    var _this = this;\n\n    var optionName = \"stylingMode\";\n    var optionValue = this.option(optionName);\n    ALLOWED_STYLE_CLASSES.forEach(function (className) {\n      return _this.$element().removeClass(className);\n    });\n    var stylingModeClass = TEXTEDITOR_STYLING_MODE_PREFIX + optionValue;\n\n    if (ALLOWED_STYLE_CLASSES.indexOf(stylingModeClass) === -1) {\n      var defaultOptionValue = this._getDefaultOptions()[optionName];\n\n      var platformOptionValue = this._convertRulesToOptions(this._defaultOptionsRules())[optionName];\n\n      stylingModeClass = TEXTEDITOR_STYLING_MODE_PREFIX + (platformOptionValue || defaultOptionValue);\n    }\n\n    this.$element().addClass(stylingModeClass);\n\n    this._updateButtonsStyling(optionValue);\n  },\n  _initMarkup: function () {\n    this.$element().addClass(TEXTEDITOR_CLASS);\n\n    this._renderInput();\n\n    this._renderStylingMode();\n\n    this._renderInputType();\n\n    this._renderPlaceholder();\n\n    this._renderProps();\n\n    this.callBase();\n\n    this._renderValue();\n  },\n  _render: function () {\n    this._renderPlaceholder();\n\n    this._refreshValueChangeEvent();\n\n    this._renderEvents();\n\n    this._renderEnterKeyAction();\n\n    this._renderEmptinessEvent();\n\n    this.callBase();\n  },\n  _renderInput: function () {\n    this._$textEditorContainer = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_CONTAINER_CLASS).appendTo(this.$element());\n    this._$textEditorInputContainer = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_INPUT_CONTAINER_CLASS).appendTo(this._$textEditorContainer);\n\n    this._$textEditorInputContainer.append(this._createInput());\n\n    this._renderButtonContainers();\n  },\n  _getInputContainer: function () {\n    return this._$textEditorInputContainer;\n  },\n  _renderPendingIndicator: function () {\n    this.$element().addClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n\n    var $inputContainer = this._getInputContainer();\n\n    var $indicatorElement = (0, _renderer2.default)(\"<div>\").addClass(TEXTEDITOR_PENDING_INDICATOR_CLASS).appendTo($inputContainer);\n    this._pendingIndicator = this._createComponent($indicatorElement, _load_indicator2.default);\n  },\n  _disposePendingIndicator: function () {\n    if (!this._pendingIndicator) {\n      return;\n    }\n\n    this._pendingIndicator.dispose();\n\n    this._pendingIndicator.$element().remove();\n\n    this._pendingIndicator = null;\n    this.$element().removeClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n  },\n  _renderValidationState: function () {\n    this.callBase();\n    var isPending = \"pending\" === this.option(\"validationStatus\");\n    var $element = this.$element();\n\n    if (isPending) {\n      !this._pendingIndicator && this._renderPendingIndicator();\n      this._showValidMark = false;\n    } else {\n      if (\"invalid\" === this.option(\"validationStatus\")) {\n        this._showValidMark = false;\n      }\n\n      if (!this._showValidMark && true === this.option(\"showValidationMark\")) {\n        this._showValidMark = \"valid\" === this.option(\"validationStatus\") && !!this._pendingIndicator;\n      }\n\n      this._disposePendingIndicator();\n    }\n\n    $element.toggleClass(TEXTEDITOR_VALID_CLASS, !!this._showValidMark);\n  },\n  _renderButtonContainers: function () {\n    var buttons = this.option(\"buttons\");\n    this._$beforeButtonsContainer = this._buttonCollection.renderBeforeButtons(buttons, this._$textEditorContainer);\n    this._$afterButtonsContainer = this._buttonCollection.renderAfterButtons(buttons, this._$textEditorContainer);\n  },\n  _clean: function () {\n    this._buttonCollection.clean();\n\n    this._disposePendingIndicator();\n\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this._$textEditorContainer = null;\n    this.callBase();\n  },\n  _createInput: function () {\n    var $input = (0, _renderer2.default)(\"<input>\");\n\n    this._applyInputAttributes($input, this.option(\"inputAttr\"));\n\n    return $input;\n  },\n  _setSubmitElementName: function (name) {\n    var inputAttrName = this.option(\"inputAttr.name\");\n    return this.callBase(name || inputAttrName || \"\");\n  },\n  _applyInputAttributes: function ($input, customAttributes) {\n    var inputAttributes = (0, _extend.extend)(this._getDefaultAttributes(), customAttributes);\n    $input.attr(inputAttributes).addClass(TEXTEDITOR_INPUT_CLASS).css(\"minHeight\", this.option(\"height\") ? \"0\" : \"\");\n  },\n  _getDefaultAttributes: function () {\n    var defaultAttributes = {\n      autocomplete: \"off\"\n    };\n\n    if (_devices2.default.real().ios) {\n      defaultAttributes.placeholder = \"&nbsp;\";\n    }\n\n    return defaultAttributes;\n  },\n  _updateButtons: function (names) {\n    this._buttonCollection.updateButtons(names);\n  },\n  _updateButtonsStyling: function (editorStylingMode) {\n    var _this2 = this;\n\n    (0, _iterator.each)(this.option(\"buttons\"), function (_, buttonOptions) {\n      if (buttonOptions.options && !buttonOptions.options.stylingMode) {\n        var buttonInstance = _this2.getButton(buttonOptions.name);\n\n        buttonInstance.option && buttonInstance.option(\"stylingMode\", \"underlined\" === editorStylingMode ? \"text\" : \"contained\");\n      }\n    });\n  },\n  _renderValue: function () {\n    var renderInputPromise = this._renderInputValue();\n\n    return renderInputPromise.promise();\n  },\n  _renderInputValue: function (value) {\n    value = value || this.option(\"value\");\n    var text = this.option(\"text\");\n    var displayValue = this.option(\"displayValue\");\n    var displayValueFormatter = this.option(\"displayValueFormatter\");\n\n    if (void 0 !== displayValue && null !== value) {\n      text = displayValueFormatter(displayValue);\n    } else {\n      if (!(0, _type.isDefined)(text)) {\n        text = displayValueFormatter(value);\n      }\n    }\n\n    this.option(\"text\", text);\n\n    if (this._input().val() !== ((0, _type.isDefined)(text) ? text : \"\")) {\n      this._renderDisplayText(text);\n    } else {\n      this._toggleEmptinessEventHandler();\n    }\n\n    return new _deferred.Deferred().resolve();\n  },\n  _renderDisplayText: function (text) {\n    this._input().val(text);\n\n    this._toggleEmptinessEventHandler();\n  },\n  _isValueValid: function () {\n    if (this._input().length) {\n      var validity = this._input().get(0).validity;\n\n      if (validity) {\n        return validity.valid;\n      }\n    }\n\n    return true;\n  },\n  _toggleEmptiness: function (isEmpty) {\n    this.$element().toggleClass(TEXTEDITOR_EMPTY_INPUT_CLASS, isEmpty);\n\n    this._togglePlaceholder(isEmpty);\n  },\n  _togglePlaceholder: function (isEmpty) {\n    if (!this._$placeholder) {\n      return;\n    }\n\n    this._$placeholder.toggleClass(STATE_INVISIBLE_CLASS, !isEmpty);\n  },\n  _renderProps: function () {\n    this._toggleReadOnlyState();\n\n    this._toggleSpellcheckState();\n\n    this._toggleTabIndex();\n  },\n  _toggleDisabledState: function (value) {\n    this.callBase.apply(this, arguments);\n\n    var $input = this._input();\n\n    if (value) {\n      $input.attr(\"disabled\", true);\n    } else {\n      $input.removeAttr(\"disabled\");\n    }\n  },\n  _toggleTabIndex: function () {\n    var $input = this._input();\n\n    var disabled = this.option(\"disabled\");\n    var focusStateEnabled = this.option(\"focusStateEnabled\");\n\n    if (disabled || !focusStateEnabled) {\n      $input.attr(\"tabIndex\", -1);\n    } else {\n      $input.removeAttr(\"tabIndex\");\n    }\n  },\n  _toggleReadOnlyState: function () {\n    this._input().prop(\"readOnly\", this._readOnlyPropValue());\n\n    this.callBase();\n  },\n  _readOnlyPropValue: function () {\n    return this.option(\"readOnly\");\n  },\n  _toggleSpellcheckState: function () {\n    this._input().prop(\"spellcheck\", this.option(\"spellcheck\"));\n  },\n  _renderPlaceholder: function () {\n    this._renderPlaceholderMarkup();\n\n    this._attachPlaceholderEvents();\n  },\n  _renderPlaceholderMarkup: function () {\n    if (this._$placeholder) {\n      this._$placeholder.remove();\n\n      this._$placeholder = null;\n    }\n\n    var $input = this._input();\n\n    var placeholderText = this.option(\"placeholder\");\n    var $placeholder = this._$placeholder = (0, _renderer2.default)(\"<div>\").attr(\"data-dx_placeholder\", placeholderText);\n    $placeholder.insertAfter($input);\n    $placeholder.addClass(TEXTEDITOR_PLACEHOLDER_CLASS);\n  },\n  _attachPlaceholderEvents: function () {\n    var _this3 = this;\n\n    var startEvent = eventUtils.addNamespace(_pointer2.default.up, this.NAME);\n\n    _events_engine2.default.on(this._$placeholder, startEvent, function () {\n      _events_engine2.default.trigger(_this3._input(), \"focus\");\n    });\n\n    this._toggleEmptinessEventHandler();\n  },\n  _placeholder: function () {\n    return this._$placeholder || (0, _renderer2.default)();\n  },\n  _clearValueHandler: function (e) {\n    var $input = this._input();\n\n    e.stopPropagation();\n\n    this._saveValueChangeEvent(e);\n\n    this._clearValue();\n\n    !this._isFocused() && _events_engine2.default.trigger($input, \"focus\");\n\n    _events_engine2.default.trigger($input, \"input\");\n  },\n  _clearValue: function () {\n    this.reset();\n  },\n  _renderEvents: function () {\n    var _this4 = this;\n\n    var $input = this._input();\n\n    (0, _iterator.each)(EVENTS_LIST, function (_, event) {\n      if (_this4.hasActionSubscription(\"on\" + event)) {\n        var action = _this4._createActionByOption(\"on\" + event, {\n          excludeValidators: [\"readOnly\"]\n        });\n\n        _events_engine2.default.on($input, eventUtils.addNamespace(event.toLowerCase(), _this4.NAME), function (e) {\n          if (_this4._disposed) {\n            return;\n          }\n\n          action({\n            event: e\n          });\n        });\n      }\n    });\n  },\n  _refreshEvents: function () {\n    var _this5 = this;\n\n    var $input = this._input();\n\n    (0, _iterator.each)(EVENTS_LIST, function (_, event) {\n      _events_engine2.default.off($input, eventUtils.addNamespace(event.toLowerCase(), _this5.NAME));\n    });\n\n    this._renderEvents();\n  },\n  _keyPressHandler: function () {\n    this.option(\"text\", this._input().val());\n  },\n  _keyDownHandler: function (e) {\n    var $input = this._input();\n\n    var isCtrlEnter = e.ctrlKey && \"enter\" === eventUtils.normalizeKeyName(e);\n    var isNewValue = $input.val() !== this.option(\"value\");\n\n    if (isCtrlEnter && isNewValue) {\n      _events_engine2.default.trigger($input, \"change\");\n    }\n  },\n  _renderValueChangeEvent: function () {\n    var keyPressEvent = eventUtils.addNamespace(this._renderValueEventName(), \"\".concat(this.NAME, \"TextChange\"));\n    var valueChangeEvent = eventUtils.addNamespace(this.option(\"valueChangeEvent\"), \"\".concat(this.NAME, \"ValueChange\"));\n    var keyDownEvent = eventUtils.addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\n\n    var $input = this._input();\n\n    _events_engine2.default.on($input, keyPressEvent, this._keyPressHandler.bind(this));\n\n    _events_engine2.default.on($input, valueChangeEvent, this._valueChangeEventHandler.bind(this));\n\n    _events_engine2.default.on($input, keyDownEvent, this._keyDownHandler.bind(this));\n  },\n  _cleanValueChangeEvent: function () {\n    var valueChangeNamespace = \".\".concat(this.NAME, \"ValueChange\");\n    var textChangeNamespace = \".\".concat(this.NAME, \"TextChange\");\n\n    _events_engine2.default.off(this._input(), valueChangeNamespace);\n\n    _events_engine2.default.off(this._input(), textChangeNamespace);\n  },\n  _refreshValueChangeEvent: function () {\n    this._cleanValueChangeEvent();\n\n    this._renderValueChangeEvent();\n  },\n  _renderValueEventName: function () {\n    return \"input change keypress\";\n  },\n  _focusTarget: function () {\n    return this._input();\n  },\n  _focusEventTarget: function () {\n    return this.element();\n  },\n  _preventNestedFocusEvent: function (event) {\n    if (event.isDefaultPrevented()) {\n      return true;\n    }\n\n    var result = this._isNestedTarget(event.relatedTarget);\n\n    if (\"focusin\" === event.type) {\n      result = result && this._isNestedTarget(event.target);\n    }\n\n    result && event.preventDefault();\n    return result;\n  },\n  _isNestedTarget: function (target) {\n    return !!this.$element().find(target).length;\n  },\n  _focusClassTarget: function () {\n    return this.$element();\n  },\n  _focusInHandler: function (event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function (event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _toggleFocusClass: function (isFocused, $element) {\n    this.callBase(isFocused, this._focusClassTarget($element));\n  },\n  _hasFocusClass: function (element) {\n    return this.callBase((0, _renderer2.default)(element || this.$element()));\n  },\n  _renderEmptinessEvent: function () {\n    var $input = this._input();\n\n    _events_engine2.default.on($input, \"input blur\", this._toggleEmptinessEventHandler.bind(this));\n  },\n  _toggleEmptinessEventHandler: function () {\n    var text = this._input().val();\n\n    var isEmpty = (\"\" === text || null === text) && this._isValueValid();\n\n    this._toggleEmptiness(isEmpty);\n  },\n  _valueChangeEventHandler: function (e, formattedValue) {\n    this._saveValueChangeEvent(e);\n\n    this.option(\"value\", arguments.length > 1 ? formattedValue : this._input().val());\n\n    this._saveValueChangeEvent(void 0);\n  },\n  _renderEnterKeyAction: function () {\n    this._enterKeyAction = this._createActionByOption(\"onEnterKey\", {\n      excludeValidators: [\"readOnly\"]\n    });\n\n    _events_engine2.default.off(this._input(), \"keyup.onEnterKey.dxTextEditor\");\n\n    _events_engine2.default.on(this._input(), \"keyup.onEnterKey.dxTextEditor\", this._enterKeyHandlerUp.bind(this));\n  },\n  _enterKeyHandlerUp: function (e) {\n    if (this._disposed) {\n      return;\n    }\n\n    if (\"enter\" === eventUtils.normalizeKeyName(e)) {\n      this._enterKeyAction({\n        event: e\n      });\n    }\n  },\n  _updateValue: function () {\n    this.option(\"text\", void 0);\n\n    this._renderValue();\n  },\n  _dispose: function () {\n    this._enterKeyAction = void 0;\n    this.callBase();\n  },\n  _getSubmitElement: function () {\n    return this._input();\n  },\n  _optionChanged: function (args) {\n    var name = args.name;\n\n    if ((0, _array.inArray)(name.replace(\"on\", \"\"), EVENTS_LIST) > -1) {\n      this._refreshEvents();\n\n      return;\n    }\n\n    switch (name) {\n      case \"valueChangeEvent\":\n        this._refreshValueChangeEvent();\n\n        this._refreshFocusEvent();\n\n        this._refreshEvents();\n\n        break;\n\n      case \"onValueChanged\":\n        this._createValueChangeAction();\n\n        break;\n\n      case \"focusStateEnabled\":\n        this.callBase(args);\n\n        this._toggleTabIndex();\n\n        break;\n\n      case \"spellcheck\":\n        this._toggleSpellcheckState();\n\n        break;\n\n      case \"mode\":\n        this._renderInputType();\n\n        break;\n\n      case \"onEnterKey\":\n        this._renderEnterKeyAction();\n\n        break;\n\n      case \"placeholder\":\n        this._renderPlaceholder();\n\n        break;\n\n      case \"readOnly\":\n      case \"disabled\":\n        this._updateButtons();\n\n        this.callBase(args);\n        break;\n\n      case \"showClearButton\":\n        this._updateButtons([\"clear\"]);\n\n        break;\n\n      case \"text\":\n        break;\n\n      case \"value\":\n        this._updateValue();\n\n        this.callBase(args);\n        break;\n\n      case \"inputAttr\":\n        this._applyInputAttributes(this._input(), args.value);\n\n        break;\n\n      case \"stylingMode\":\n        this._renderStylingMode();\n\n        break;\n\n      case \"buttons\":\n        if (args.fullName === args.name) {\n          checkButtonsOptionType(args.value);\n        }\n\n        this._$beforeButtonsContainer && this._$beforeButtonsContainer.remove();\n        this._$afterButtonsContainer && this._$afterButtonsContainer.remove();\n\n        this._buttonCollection.clean();\n\n        this._renderButtonContainers();\n\n        break;\n\n      case \"displayValueFormatter\":\n        this._invalidate();\n\n        break;\n\n      case \"showValidationMark\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _renderInputType: function () {\n    this._setInputType(this.option(\"mode\"));\n  },\n  _setInputType: function (type) {\n    var input = this._input();\n\n    if (\"search\" === type) {\n      type = \"text\";\n    }\n\n    try {\n      input.prop(\"type\", type);\n    } catch (e) {\n      input.prop(\"type\", \"text\");\n    }\n  },\n  getButton: function (name) {\n    return this._buttonCollection.getButton(name);\n  },\n  focus: function () {\n    _events_engine2.default.trigger(this._input(), \"focus\");\n  },\n  blur: function () {\n    if (this._input().is(_dom_adapter2.default.getActiveElement())) {\n      _dom2.default.resetActiveElement();\n    }\n  },\n  reset: function () {\n    if (this._showValidMark) {\n      this._showValidMark = false;\n\n      this._renderValidationState();\n    }\n\n    var defaultOptions = this._getDefaultOptions();\n\n    if (this.option(\"value\") === defaultOptions.value) {\n      this.option(\"text\", \"\");\n\n      this._renderValue();\n    } else {\n      this.option(\"value\", defaultOptions.value);\n    }\n  },\n  on: function (eventName, eventHandler) {\n    var result = this.callBase(eventName, eventHandler);\n    var event = eventName.charAt(0).toUpperCase() + eventName.substr(1);\n\n    if (EVENTS_LIST.indexOf(event) >= 0) {\n      this._refreshEvents();\n    }\n\n    return result;\n  }\n});\n\nmodule.exports = TextEditorBase;","map":null,"metadata":{},"sourceType":"script"}