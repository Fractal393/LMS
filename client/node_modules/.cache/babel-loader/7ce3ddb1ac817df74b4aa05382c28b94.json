{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { EventHandler, remove, Browser, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat, applyBiggerTheme } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { parentsUntil, appendChildren, extend, eventPromise } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\n\nvar ExcelFilterBase =\n/** @class */\nfunction (_super) {\n  __extends(ExcelFilterBase, _super);\n  /**\n   * Constructor for excel filtering module\n   * @hidden\n   */\n\n\n  function ExcelFilterBase(parent, customFltrOperators) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.customFilterOperators = customFltrOperators;\n    _this.isExcel = true;\n    return _this;\n  }\n\n  ExcelFilterBase.prototype.getCMenuDS = function (type, operator) {\n    var options = {\n      number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan', 'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n      string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter']\n    };\n    options.date = options.number;\n    options.datetime = options.number;\n    var model = [];\n\n    for (var i = 0; i < options[type].length; i++) {\n      if (options[type][i].length) {\n        if (operator) {\n          model.push({\n            text: this.getLocalizedLabel(options[type][i]) + '...',\n            iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n          });\n        } else {\n          model.push({\n            text: this.getLocalizedLabel(options[type][i]) + '...'\n          });\n        }\n      } else {\n        model.push({\n          separator: true\n        });\n      }\n    }\n\n    return model;\n  };\n  /**\n   * To destroy the filter bar.\n   * @return {void}\n   * @hidden\n   */\n\n\n  ExcelFilterBase.prototype.destroy = function () {\n    if (this.dlg) {\n      this.unwireExEvents();\n\n      _super.prototype.destroy.call(this);\n    }\n\n    if (this.cmenu && this.cmenu.parentElement) {\n      remove(this.cmenu);\n    }\n  };\n\n  ExcelFilterBase.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n    var options = {\n      string: 'TextFilter',\n      date: 'DateFilter',\n      datetime: 'DateTimeFilter',\n      number: 'NumberFilter'\n    };\n    this.menu = this.parent.createElement('div', {\n      className: 'e-contextmenu-wrapper'\n    });\n\n    if (this.parent.enableRtl) {\n      this.menu.classList.add('e-rtl');\n    } else {\n      this.menu.classList.remove('e-rtl');\n    }\n\n    var ul = this.parent.createElement('ul');\n    var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n    ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n\n    if (type !== 'boolean') {\n      ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n    }\n\n    this.menu.appendChild(ul);\n    this.parent.notify(events.beforeFltrcMenuOpen, {\n      element: this.menu\n    });\n  };\n\n  ExcelFilterBase.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n    var li = this.parent.createElement('li', {\n      className: className + ' e-menu-item'\n    });\n    li.innerHTML = val;\n    li.insertBefore(this.parent.createElement('span', {\n      className: 'e-menu-icon e-icons ' + iconName\n    }), li.firstChild);\n\n    if (isSubMenu) {\n      li.appendChild(this.parent.createElement('span', {\n        className: 'e-icons e-caret'\n      }));\n    }\n\n    return li;\n  };\n\n  ExcelFilterBase.prototype.wireExEvents = function () {\n    EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n    EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n  };\n\n  ExcelFilterBase.prototype.unwireExEvents = function () {\n    EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n    EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n  };\n\n  ExcelFilterBase.prototype.clickExHandler = function (e) {\n    var menuItem = parentsUntil(e.target, 'e-menu-item');\n\n    if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n      this.clearFilter();\n      this.closeDialog();\n    }\n  };\n\n  ExcelFilterBase.prototype.destroyCMenu = function () {\n    if (this.menuObj && !this.menuObj.isDestroyed) {\n      this.menuObj.destroy();\n      remove(this.cmenu);\n    }\n  };\n\n  ExcelFilterBase.prototype.hoverHandler = function (e) {\n    var target = e.target.querySelector('.e-contextmenu');\n    var li = parentsUntil(e.target, 'e-menu-item');\n    var focused = this.menu.querySelector('.e-focused');\n    var isSubMenu;\n\n    if (focused) {\n      focused.classList.remove('e-focused');\n    }\n\n    if (li) {\n      li.classList.add('e-focused');\n      isSubMenu = li.classList.contains('e-submenu');\n    }\n\n    if (target) {\n      return;\n    }\n\n    if (!isSubMenu) {\n      var submenu = this.menu.querySelector('.e-submenu');\n\n      if (!isNullOrUndefined(submenu)) {\n        submenu.classList.remove('e-selected');\n      }\n\n      this.isCMenuOpen = false;\n      this.destroyCMenu();\n    }\n\n    var selectedMenu = this.ensureTextFilter();\n\n    if (!this.isCMenuOpen && isSubMenu) {\n      li.classList.add('e-selected');\n      this.isCMenuOpen = true;\n      var menuOptions = {\n        items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n        select: this.selectHandler.bind(this),\n        onClose: this.destroyCMenu.bind(this),\n        enableRtl: this.parent.enableRtl,\n        beforeClose: this.preventClose\n      };\n      this.parent.element.appendChild(this.cmenu);\n      this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n      var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n      var pos = {\n        top: 0,\n        left: 0\n      };\n\n      if (Browser.isDevice) {\n        var contextRect = this.getContextBounds(this.menuObj);\n        pos.top = (window.innerHeight - contextRect.height) / 2;\n        pos.left = (window.innerWidth - contextRect.width) / 2;\n        this.closeDialog();\n      } else {\n        pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n        pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n      }\n\n      this.menuObj.open(pos.top, pos.left, e.target);\n      applyBiggerTheme(this.parent.element, this.menuObj.element.parentElement);\n    }\n  };\n\n  ExcelFilterBase.prototype.ensureTextFilter = function () {\n    var selectedMenu;\n    var predicates = this.existingPredicate[this.options.field];\n\n    if (predicates && predicates.length === 2) {\n      if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n        selectedMenu = 'between';\n      } else {\n        selectedMenu = 'customfilter';\n      }\n    } else {\n      if (predicates && predicates.length === 1) {\n        this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n        selectedMenu = predicates[0].operator;\n      }\n    }\n\n    return selectedMenu;\n  };\n\n  ExcelFilterBase.prototype.preventClose = function (args) {\n    if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n      args.cancel = true;\n    }\n  };\n\n  ExcelFilterBase.prototype.getContextBounds = function (context) {\n    var elementVisible = this.menuObj.element.style.display;\n    this.menuObj.element.style.display = 'block';\n    return this.menuObj.element.getBoundingClientRect();\n  };\n\n  ExcelFilterBase.prototype.getCMenuYPosition = function (target, context) {\n    var contextWidth = this.getContextBounds(context).width;\n    var targetPosition = target.getBoundingClientRect();\n    var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n    var targetBorder = target.offsetWidth - target.clientWidth;\n    targetBorder = targetBorder ? targetBorder + 1 : 0;\n    return leftPos < 1 ? targetPosition.right + 1 - targetBorder : targetPosition.left - contextWidth - 1 + targetBorder;\n  };\n\n  ExcelFilterBase.prototype.openDialog = function (options) {\n    var _this = this;\n\n    this.updateModel(options);\n    this.getAndSetChkElem(options);\n    this.showDialog(options);\n    this.dialogObj.dataBind();\n    var filterLength = this.existingPredicate[options.field] && this.existingPredicate[options.field].length || this.options.filteredColumns.filter(function (col) {\n      return _this.options.field === col.field;\n    }).length;\n    this.createMenu(options.type, filterLength > 0, filterLength === 1 || filterLength === 2);\n    this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n    this.dlg.classList.add('e-excelfilter');\n\n    if (this.parent.enableRtl) {\n      this.dlg.classList.add('e-rtl');\n    }\n\n    this.dlg.classList.remove('e-checkboxfilter');\n    this.cmenu = this.parent.createElement('ul', {\n      className: 'e-excel-menu'\n    });\n    this.wireExEvents();\n  };\n\n  ExcelFilterBase.prototype.closeDialog = function () {\n    _super.prototype.closeDialog.call(this);\n  };\n\n  ExcelFilterBase.prototype.selectHandler = function (e) {\n    if (e.item) {\n      this.menuItem = e.item;\n      this.renderDialogue(e);\n    }\n  };\n\n  ExcelFilterBase.prototype.renderDialogue = function (e) {\n    var _this = this;\n\n    var target = e.element;\n    var column = this.options.field;\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var mainDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-maindiv',\n      id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n    });\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-xlflmenu',\n      id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n    });\n    this.parent.element.appendChild(this.dlgDiv);\n    this.dlgObj = new Dialog({\n      header: this.getLocalizedLabel('CustomFilter'),\n      isModal: true,\n      overlayClick: this.removeDialog.bind(this),\n      showCloseIcon: true,\n      closeOnEscape: false,\n      target: document.body,\n      // target: this.parent.element,\n      visible: false,\n      enableRtl: this.parent.enableRtl,\n      open: function () {\n        var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n\n        if (_this.options.column.filterTemplate) {\n          if (isBlazor()) {\n            row.querySelector('.e-xlfl-valuediv').children[0].focus();\n          } else {\n            row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n          }\n        } else {\n          row.cells[1].querySelector('input:not([type=hidden])').focus();\n        }\n      },\n      close: this.removeDialog.bind(this),\n      created: this.createdDialog.bind(this, target, column),\n      buttons: [{\n        click: this.filterBtnClick.bind(this, column),\n        buttonModel: {\n          content: this.getLocalizedLabel('OKButton'),\n          isPrimary: true,\n          cssClass: 'e-xlfl-okbtn'\n        }\n      }, {\n        click: this.removeDialog.bind(this),\n        buttonModel: {\n          content: this.getLocalizedLabel('CancelButton'),\n          cssClass: 'e-xlfl-cancelbtn'\n        }\n      }],\n      content: mainDiv,\n      width: 430,\n      animationSettings: {\n        effect: 'None'\n      }\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dlgObj[isStringTemplate] = true;\n    this.dlgDiv.setAttribute('aria-label', this.getLocalizedLabel('CustomFilterDialogARIA'));\n    this.dlgObj.appendTo(this.dlgDiv);\n  };\n\n  ExcelFilterBase.prototype.removeDialog = function () {\n    if (isBlazor()) {\n      var columns = this.options.columns || [];\n\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[i].filterTemplate) {\n          var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n          updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n        }\n      }\n    }\n\n    this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n    remove(this.dlgDiv);\n  };\n\n  ExcelFilterBase.prototype.createdDialog = function (target, column) {\n    this.renderCustomFilter(target, column);\n    this.dlgObj.element.style.left = '0px';\n    this.dlgObj.element.style.top = '0px';\n\n    if (Browser.isDevice && window.innerWidth < 440) {\n      this.dlgObj.element.style.width = '90%';\n    }\n\n    this.parent.notify(events.beforeCustomFilterOpen, {\n      column: column,\n      dialog: this.dialogObj\n    });\n    this.dlgObj.show();\n    applyBiggerTheme(this.parent.element, this.dlgObj.element.parentElement);\n  };\n\n  ExcelFilterBase.prototype.renderCustomFilter = function (target, column) {\n    var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n    /* tslint:disable-next-line:max-line-length */\n\n    var dlgFields = this.parent.createElement('div', {\n      innerHTML: this.getLocalizedLabel('ShowRowsWhere'),\n      className: 'e-xlfl-dlgfields'\n    });\n    dlgConetntEle.appendChild(dlgFields); //column name\n\n    var fieldSet = this.parent.createElement('div', {\n      innerHTML: this.options.displayName,\n      className: 'e-xlfl-fieldset'\n    });\n    dlgConetntEle.appendChild(fieldSet);\n    this.renderFilterUI(column, dlgConetntEle);\n  };\n\n  ExcelFilterBase.prototype.filterBtnClick = function (col) {\n    var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n    var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n    var colValue = isComplex ? complexFieldName : col;\n    var fValue = this.options.column.filterTemplate && isBlazor() ? this.dlgDiv.querySelector('.-xlfl-frstvalue').children[0].querySelector('.e-control').ej2_instances[0] : this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n    var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n    var sValue = this.options.column.filterTemplate && isBlazor() ? this.dlgDiv.querySelector('.-xlfl-secndvalue').children[0].querySelector('.e-control').ej2_instances[0] : this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n    var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n    var checkBoxValue;\n\n    if (this.options.type === 'string') {\n      var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n      checkBoxValue = checkBox.checked;\n    }\n\n    var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n    var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n    var predicate = andRadio.checked ? 'and' : 'or';\n\n    if (sValue.value === null) {\n      predicate = 'or';\n    }\n\n    this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.options.ignoreAccent, sOperator.value, sValue.value);\n    this.removeDialog();\n  };\n  /**\n   * @hidden\n   * Filters grid row by column name with given options.\n   * @param {string} fieldName - Defines the field name of the filter column.\n   * @param {string} firstOperator - Defines the first operator by how to filter records.\n   * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n   * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n   * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n   * filter records with case insensitive(uppercase and lowercase letters treated as same).\n   * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n   * @param {string} secondOperator - Defines the second operator by how to filter records.\n   * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n   */\n\n\n  ExcelFilterBase.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n    var col = this.parent.getColumnByField ? this.parent.getColumnByField(fieldName) : this.options.column;\n    var field = this.isForeignColumn(col) ? col.foreignKeyValue : fieldName;\n    var fColl = [];\n    var mPredicate;\n    fColl.push({\n      field: field,\n      predicate: predicate,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      operator: firstOperator,\n      value: firstValue,\n      type: this.options.type\n    });\n    var arg = {\n      instance: this,\n      handler: this.filterByColumn,\n      arg1: fieldName,\n      arg2: firstOperator,\n      arg3: firstValue,\n      arg4: predicate,\n      arg5: matchCase,\n      arg6: ignoreAccent,\n      arg7: secondOperator,\n      arg8: secondValue,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, arg);\n\n    if (arg.cancel) {\n      return;\n    }\n\n    mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n\n    if (!isNullOrUndefined(secondValue) && !isNullOrUndefined(secondOperator)) {\n      fColl.push({\n        field: field,\n        predicate: predicate,\n        matchCase: matchCase,\n        ignoreAccent: ignoreAccent,\n        operator: secondOperator,\n        value: secondValue,\n        type: this.options.type\n      });\n      /* tslint:disable-next-line:max-line-length */\n\n      mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n    }\n\n    var args = {\n      action: 'filtering',\n      filterCollection: fColl,\n      field: this.options.field,\n      ejpredicate: mPredicate,\n      actualPredicate: fColl\n    };\n\n    if (this.isForeignColumn(col)) {\n      this.foreignKeyFilter(args, fColl, mPredicate);\n    } else {\n      this.options.handler(args);\n    }\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n    var fieldElement = this.parent.createElement('tr', {\n      className: 'e-xlfl-fields'\n    });\n    table.appendChild(fieldElement);\n    var xlfloptr = this.parent.createElement('td', {\n      className: 'e-xlfl-optr'\n    });\n    fieldElement.appendChild(xlfloptr);\n    var optrDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-optrdiv'\n    });\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var optrInput = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + elementID : column + elementID\n    });\n    optrDiv.appendChild(optrInput);\n    xlfloptr.appendChild(optrDiv);\n    var optr = this.options.type + 'Operator';\n    var dropDatasource = this.customFilterOperators[optr];\n    this.optrData = dropDatasource;\n    var selectedValue = this.dropSelectedVal(this.options.column, predicates, isFirst); //Trailing three dots are sliced.\n\n    var menuText = '';\n\n    if (this.menuItem) {\n      menuText = this.menuItem.text.slice(0, -3);\n\n      if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n        selectedValue = isFirst ? menuText : undefined;\n      }\n\n      if (menuText === this.getLocalizedLabel('Between')) {\n        selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n      }\n    }\n\n    var col = this.options.column;\n    this.dropOptr = new DropDownList(extend({\n      dataSource: dropDatasource,\n      fields: {\n        text: 'text',\n        value: 'value'\n      },\n      text: selectedValue,\n      open: this.dropDownOpen.bind(this),\n      enableRtl: this.parent.enableRtl,\n      change: this.dropDownValueChange.bind(this)\n    }, col.filter.params));\n    this.dropOptr.appendTo(optrInput);\n    var operator = this.getSelectedValue(selectedValue);\n    return {\n      fieldElement: fieldElement,\n      operator: operator\n    };\n  };\n\n  ExcelFilterBase.prototype.dropDownOpen = function (args) {\n    args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n  };\n\n  ExcelFilterBase.prototype.dropDownValueChange = function (args) {\n    if (args.element.id.includes('-xlfl-frstoptr')) {\n      this.firstOperator = args.value.toString();\n    } else {\n      this.secondOperator = args.value.toString();\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  ExcelFilterBase.prototype.getFilterUIInfo = function () {\n    return {\n      firstOperator: this.firstOperator,\n      secondOperator: this.secondOperator,\n      field: this.options.field\n    };\n  };\n\n  ExcelFilterBase.prototype.getSelectedValue = function (text) {\n    var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n    return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n  };\n\n  ExcelFilterBase.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n    var operator;\n\n    if (predicates && predicates.length > 0) {\n      operator = predicates.length === 2 ? isFirst ? predicates[0].operator : predicates[1].operator : isFirst ? predicates[0].operator : undefined;\n    } else if (isFirst && col.type === 'string' && !col.filter.operator) {\n      operator = 'startswith';\n    } else {\n      operator = isFirst ? col.filter.operator || 'equal' : undefined;\n    }\n\n    return this.getSelectedText(operator);\n  };\n\n  ExcelFilterBase.prototype.getSelectedText = function (operator) {\n    var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n    return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n  };\n\n  ExcelFilterBase.prototype.renderFilterUI = function (column, dlgConetntEle) {\n    var predicates = this.existingPredicate[column];\n    var table = this.parent.createElement('table', {\n      className: 'e-xlfl-table'\n    });\n    dlgConetntEle.appendChild(table);\n    var colGroup = this.parent.createElement('colGroup');\n    colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n    table.appendChild(colGroup); //Renders first dropdown\n\n    /* tslint:disable-next-line:max-line-length */\n\n    var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n    this.firstOperator = optr.operator; //Renders first value\n\n    this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n    var predicate = this.parent.createElement('tr', {\n      className: 'e-xlfl-predicate'\n    });\n    table.appendChild(predicate); //Renders first radion button\n\n    this.renderRadioButton(column, predicate, predicates); //Renders second dropdown\n\n    optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n    this.secondOperator = optr.operator; //Renders second text box\n\n    this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n  };\n\n  ExcelFilterBase.prototype.renderRadioButton = function (column, tr, predicates) {\n    var td = this.parent.createElement('td', {\n      className: 'e-xlfl-radio',\n      attrs: {\n        'colSpan': '2'\n      }\n    });\n    tr.appendChild(td);\n    var radioDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-radiodiv',\n      attrs: {\n        'style': 'display: inline-block'\n      }\n    });\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    /* tslint:disable-next-line:max-line-length */\n\n    var frstpredicate = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate',\n      attrs: {\n        'type': 'radio'\n      }\n    });\n    /* tslint:disable-next-line:max-line-length */\n\n    var secndpredicate = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate',\n      attrs: {\n        'type': 'radio'\n      }\n    }); //appends into div\n\n    radioDiv.appendChild(frstpredicate);\n    radioDiv.appendChild(secndpredicate);\n    td.appendChild(radioDiv);\n\n    if (this.options.type === 'string') {\n      this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n    } // Initialize AND RadioButton component.\n\n    /* tslint:disable-next-line:max-line-length */\n\n\n    var andRadio = new RadioButton({\n      label: this.getLocalizedLabel('AND'),\n      name: 'default',\n      cssClass: 'e-xlfl-radio-and',\n      checked: true,\n      enableRtl: this.parent.enableRtl\n    }); // Initialize OR RadioButton component.\n\n    /* tslint:disable-next-line:max-line-length */\n\n    var orRadio = new RadioButton({\n      label: this.getLocalizedLabel('OR'),\n      name: 'default',\n      cssClass: 'e-xlfl-radio-or',\n      enableRtl: this.parent.enableRtl\n    });\n    var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n\n    if (flValue === 'and') {\n      andRadio.checked = true;\n      orRadio.checked = false;\n    } else {\n      orRadio.checked = true;\n      andRadio.checked = false;\n    } // Render initialized RadioButton.\n\n\n    andRadio.appendTo(frstpredicate);\n    orRadio.appendTo(secndpredicate);\n  };\n  /* tslint:disable-next-line:no-any */\n\n\n  ExcelFilterBase.prototype.removeObjects = function (elements) {\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n      var obj = elements_1[_i];\n\n      if (obj && !obj.isDestroyed) {\n        obj.destroy();\n      }\n    }\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n    var value = this.parent.createElement('td', {\n      className: 'e-xlfl-value'\n    });\n    optr.fieldElement.appendChild(value);\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var valueDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-valuediv'\n    });\n    var isFilteredCol = this.options.filteredColumns.some(function (col) {\n      return column === col.field;\n    });\n    var fltrPredicates = this.options.filteredColumns.filter(function (col) {\n      return col.field === column;\n    });\n\n    if (this.options.column.filterTemplate) {\n      var data = {};\n      var columnObj = this.options.column;\n\n      if (isFilteredCol && elementId) {\n        data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n      }\n\n      var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n      var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n      appendChildren(valueDiv, element);\n\n      if (isBlazor()) {\n        valueDiv.children[0].classList.add(elementId);\n\n        if (this.dlgDiv.querySelectorAll('.e-xlfl-value').length > 1) {\n          updateBlazorTemplate(tempID, 'FilterTemplate', columnObj);\n        }\n      } else {\n        valueDiv.children[0].id = isComplex ? complexFieldName + elementId : column + elementId;\n      }\n\n      value.appendChild(valueDiv);\n    } else {\n      var valueInput = this.parent.createElement('input', {\n        id: isComplex ? complexFieldName + elementId : column + elementId\n      });\n      valueDiv.appendChild(valueInput);\n      value.appendChild(valueDiv);\n      var flValue = void 0;\n      var predicate = void 0;\n\n      if (predicates && predicates.length > 0) {\n        predicate = predicates.length === 2 ? isFirst ? predicates[0] : predicates[1] : isFirst ? predicates[0] : undefined;\n        flValue = predicate && predicate.operator === optr.operator ? predicate.value : undefined;\n      }\n\n      var types = {\n        'string': this.renderAutoComplete.bind(this),\n        'number': this.renderNumericTextBox.bind(this),\n        'date': this.renderDate.bind(this),\n        'datetime': this.renderDateTime.bind(this)\n      };\n      types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n    }\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n    var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n\n    if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n      data = {\n        column: predicates instanceof Array ? predicates[predIndex] : predicates\n      };\n      var indx = this.options.column.columnData && fltrPredicates.length > 1 ? this.options.column.columnData.length === 1 ? 0 : 1 : predIndex;\n      data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] : fltrPredicates[indx].value;\n\n      if (this.options.foreignKeyValue) {\n        data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n      }\n    }\n\n    return data;\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n    /* tslint:disable-next-line:max-line-length */\n    var matchCaseDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-matchcasediv',\n      attrs: {\n        'style': 'display: inline-block'\n      }\n    });\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var matchCaseInput = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + elementId : column + elementId,\n      attrs: {\n        'type': 'checkbox'\n      }\n    });\n    matchCaseDiv.appendChild(matchCaseInput);\n    matchCase.appendChild(matchCaseDiv);\n    var flValue = predicates && predicates.length > 0 ? predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase : false; // Initialize Match Case check box.\n\n    var checkbox = new CheckBox({\n      label: this.getLocalizedLabel('MatchCase'),\n      enableRtl: this.parent.enableRtl,\n      checked: flValue\n    }); // Render initialized CheckBox.\n\n    checkbox.appendTo(matchCaseInput);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n    var format = getCustomDateFormat(options.format, options.type);\n    this.datePicker = new DatePicker(extend({\n      format: format,\n      cssClass: 'e-popup-flmenu',\n      placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n      width: '100%',\n      enableRtl: isRtl,\n      value: new Date(fValue),\n      locale: this.parent.locale\n    }, options.column.filter.params));\n    this.datePicker.appendTo(inputValue);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n    var format = getCustomDateFormat(options.format, options.type);\n    this.dateTimePicker = new DateTimePicker(extend({\n      format: format,\n      cssClass: 'e-popup-flmenu',\n      placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n      width: '100%',\n      enableRtl: isRtl,\n      value: new Date(fValue),\n      locale: this.parent.locale\n    }, options.column.filter.params));\n    this.dateTimePicker.appendTo(inputValue);\n  };\n\n  ExcelFilterBase.prototype.completeAction = function (e) {\n    e.result = distinctStringValues(e.result);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n    this.numericTxtObj = new NumericTextBox(extend({\n      format: options.format,\n      placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n      enableRtl: isRtl,\n      value: fValue,\n      locale: this.parent.locale\n    }, options.column.filter.params));\n    this.numericTxtObj.appendTo(inputValue);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n    var _this = this;\n\n    var colObj = this.options.column;\n    var isForeignColumn = this.isForeignColumn(colObj);\n    var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n    var fields = {\n      value: isForeignColumn ? colObj.foreignKeyValue : column\n    };\n    var actObj = new AutoComplete(extend({\n      dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n      fields: fields,\n      query: this.getQuery(),\n      sortOrder: 'Ascending',\n      locale: this.parent.locale,\n      cssClass: 'e-popup-flmenu',\n      autofill: true,\n      focus: function () {\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var columnvalue = isComplex ? complexFieldName : column;\n        actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue + (inputValue.id === columnvalue + '-xlfl-frstvalue' ? '-xlfl-frstoptr' : '-xlfl-secndoptr')).ej2_instances[0].value;\n        actObj.ignoreCase = options.type === 'string' ? !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked : true;\n        actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType : 'equal';\n      },\n      placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n      enableRtl: isRtl,\n      actionComplete: function (e) {\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        e.result = e.result.filter(function (obj, index, arr) {\n          return arr.map(function (mapObject) {\n            return isComplex ? _this.performComplexDataOperation(actObj.fields.value, mapObject) : mapObject[actObj.fields.value];\n          }).indexOf(isComplex ? _this.performComplexDataOperation(actObj.fields.value, obj) : obj[_this.actObj.fields.value]) === index;\n        });\n      },\n      value: fValue\n    }, colObj.filter.params));\n\n    if (dataSource && 'result' in dataSource) {\n      var defObj = eventPromise({\n        requestType: 'stringfilterrequest'\n      }, this.getQuery());\n      this.parent.trigger(events.dataStateChange, defObj.state);\n      var def = defObj.deffered;\n      def.promise.then(function (e) {\n        actObj.dataSource = new DataManager(e);\n      });\n    }\n\n    actObj.appendTo(inputValue);\n    this.actObj = actObj;\n  };\n\n  ExcelFilterBase.prototype.performComplexDataOperation = function (value, mapObject) {\n    var returnObj;\n    var length = value.split('.').length;\n    var splits = value.split('.');\n    var duplicateMap = mapObject;\n\n    for (var i = 0; i < length; i++) {\n      returnObj = duplicateMap[splits[i]];\n      duplicateMap = returnObj;\n    }\n\n    return returnObj;\n  };\n\n  return ExcelFilterBase;\n}(CheckBoxFilterBase);\n\nexport { ExcelFilterBase };","map":null,"metadata":{},"sourceType":"module"}