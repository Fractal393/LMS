{"ast":null,"code":"/**\r\n * DevExtreme (ui/load_indicator.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar windowUtils = require(\"../core/utils/window\");\n\nvar navigator = windowUtils.getNavigator();\n\nvar support = require(\"../core/utils/support\");\n\nvar themes = require(\"./themes\");\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar devices = require(\"../core/devices\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar Widget = require(\"./widget/ui.widget\");\n\nvar LOADINDICATOR_CLASS = \"dx-loadindicator\";\nvar LOADINDICATOR_WRAPPER_CLASS = \"dx-loadindicator-wrapper\";\nvar LOADINDICATOR_CONTENT_CLASS = \"dx-loadindicator-content\";\nvar LOADINDICATOR_ICON_CLASS = \"dx-loadindicator-icon\";\nvar LOADINDICATOR_SEGMENT_CLASS = \"dx-loadindicator-segment\";\nvar LOADINDICATOR_SEGMENT_INNER_CLASS = \"dx-loadindicator-segment-inner\";\nvar LOADINDICATOR_IMAGE_CLASS = \"dx-loadindicator-image\";\nvar LoadIndicator = Widget.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      indicatorSrc: \"\",\n      activeStateEnabled: false,\n      hoverStateEnabled: false,\n      _animatingSegmentCount: 1,\n      _animatingSegmentInner: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    var themeName = themes.current();\n    return this.callBase().concat([{\n      device: function () {\n        var realDevice = devices.real();\n        var obsoleteAndroid = \"android\" === realDevice.platform && !/chrome/i.test(navigator.userAgent);\n        return obsoleteAndroid;\n      },\n      options: {\n        viaImage: true\n      }\n    }, {\n      device: function () {\n        return themes.isIos7(themeName);\n      },\n      options: {\n        _animatingSegmentCount: 11\n      }\n    }, {\n      device: function () {\n        return themes.isMaterial(themeName);\n      },\n      options: {\n        _animatingSegmentCount: 2,\n        _animatingSegmentInner: true\n      }\n    }, {\n      device: function () {\n        return themes.isGeneric(themeName);\n      },\n      options: {\n        _animatingSegmentCount: 7\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase();\n    this.$element().addClass(LOADINDICATOR_CLASS);\n  },\n  _initMarkup: function () {\n    this.callBase();\n\n    this._renderWrapper();\n\n    this._renderIndicatorContent();\n\n    this._renderMarkup();\n  },\n  _renderWrapper: function () {\n    this._$wrapper = $(\"<div>\").addClass(LOADINDICATOR_WRAPPER_CLASS);\n    this.$element().append(this._$wrapper);\n  },\n  _renderIndicatorContent: function () {\n    this._$content = $(\"<div>\").addClass(LOADINDICATOR_CONTENT_CLASS);\n\n    this._$wrapper.append(this._$content);\n  },\n  _renderMarkup: function () {\n    if (support.animation() && !this.option(\"viaImage\") && !this.option(\"indicatorSrc\")) {\n      this._renderMarkupForAnimation();\n    } else {\n      this._renderMarkupForImage();\n    }\n  },\n  _renderMarkupForAnimation: function () {\n    var animatingSegmentInner = this.option(\"_animatingSegmentInner\");\n    this._$indicator = $(\"<div>\").addClass(LOADINDICATOR_ICON_CLASS);\n\n    this._$content.append(this._$indicator);\n\n    for (var i = this.option(\"_animatingSegmentCount\"); i >= 0; --i) {\n      var $segment = $(\"<div>\").addClass(LOADINDICATOR_SEGMENT_CLASS).addClass(LOADINDICATOR_SEGMENT_CLASS + i);\n\n      if (animatingSegmentInner) {\n        $segment.append($(\"<div>\").addClass(LOADINDICATOR_SEGMENT_INNER_CLASS));\n      }\n\n      this._$indicator.append($segment);\n    }\n  },\n  _renderMarkupForImage: function () {\n    var indicatorSrc = this.option(\"indicatorSrc\");\n\n    this._$wrapper.addClass(LOADINDICATOR_IMAGE_CLASS);\n\n    if (indicatorSrc) {\n      this._$wrapper.css(\"backgroundImage\", \"url(\" + indicatorSrc + \")\");\n    }\n  },\n  _renderDimensions: function () {\n    this.callBase();\n\n    this._updateContentSizeForAnimation();\n  },\n  _updateContentSizeForAnimation: function () {\n    if (!this._$indicator) {\n      return;\n    }\n\n    var width = this.option(\"width\");\n    var height = this.option(\"height\");\n\n    if (width || height) {\n      width = this.$element().width();\n      height = this.$element().height();\n      var minDimension = Math.min(height, width);\n\n      this._$wrapper.css({\n        height: minDimension,\n        width: minDimension,\n        fontSize: minDimension\n      });\n    }\n  },\n  _clean: function () {\n    this.callBase();\n\n    this._removeMarkupForAnimation();\n\n    this._removeMarkupForImage();\n  },\n  _removeMarkupForAnimation: function () {\n    if (!this._$indicator) {\n      return;\n    }\n\n    this._$indicator.remove();\n\n    delete this._$indicator;\n  },\n  _removeMarkupForImage: function () {\n    this._$wrapper.css(\"backgroundImage\", \"none\");\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"_animatingSegmentCount\":\n      case \"_animatingSegmentInner\":\n      case \"indicatorSrc\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\nregisterComponent(\"dxLoadIndicator\", LoadIndicator);\nmodule.exports = LoadIndicator;\nmodule.exports.default = module.exports;","map":null,"metadata":{},"sourceType":"script"}