{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { EventHandler, Property, NotifyPropertyChanges, Animation, attributes } from '@syncfusion/ej2-base';\nimport { Event, remove, removeClass } from '@syncfusion/ej2-base';\nimport { Complex, ChildProperty, isBlazor, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nvar HIDESPINNER = 'e-hide-spinner';\nvar PROGRESS = 'e-progress';\nvar PROGRESSACTIVE = 'e-progress-active';\nvar CONTENTCLS = 'e-btn-content';\n/**\n * Defines the spin settings.\n */\n\nvar SpinSettings =\n/** @class */\nfunction (_super) {\n  __extends(SpinSettings, _super);\n\n  function SpinSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(null)], SpinSettings.prototype, \"template\", void 0);\n\n  __decorate([Property(16)], SpinSettings.prototype, \"width\", void 0);\n\n  __decorate([Property('Left')], SpinSettings.prototype, \"position\", void 0);\n\n  return SpinSettings;\n}(ChildProperty);\n\nexport { SpinSettings };\n/**\n * Defines the animation settings.\n */\n\nvar AnimationSettings =\n/** @class */\nfunction (_super) {\n  __extends(AnimationSettings, _super);\n\n  function AnimationSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property(400)], AnimationSettings.prototype, \"duration\", void 0);\n\n  __decorate([Property('None')], AnimationSettings.prototype, \"effect\", void 0);\n\n  __decorate([Property('ease')], AnimationSettings.prototype, \"easing\", void 0);\n\n  return AnimationSettings;\n}(ChildProperty);\n\nexport { AnimationSettings };\n/**\n * The ProgressButton visualizes the progression of an operation to indicate the user\n * that a process is happening in the background with visual representation.\n * ```html\n * <button id=\"element\"></button>\n * ```\n * ```typescript\n * <script>\n * var progressButtonObj = new ProgressButton({ content: 'Progress Button' });\n * progressButtonObj.appendTo(\"#element\");\n * </script>\n * ```\n */\n\nvar ProgressButton =\n/** @class */\nfunction (_super) {\n  __extends(ProgressButton, _super);\n  /**\n   * Constructor for creating the widget\n   * @param  {ProgressButtonModel} options?\n   * @param  {string|HTMLButtonElement} element?\n   */\n\n\n  function ProgressButton(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.step = 1;\n    return _this;\n  }\n\n  ProgressButton.prototype.preRender = function () {\n    _super.prototype.preRender.call(this);\n  };\n  /**\n   * Initialize the Component rendering\n   * @returns void\n   * @private\n   */\n\n\n  ProgressButton.prototype.render = function () {\n    if (isBlazor()) {\n      this.isServerRendered = false;\n    }\n\n    _super.prototype.render.call(this);\n\n    this.init();\n    this.wireEvents();\n    this.setAria();\n    this.renderComplete();\n  };\n  /**\n   * Starts the button progress at the specified percent.\n   * @param percent Starts the button progress at this percent.\n   * @returns void\n   */\n\n\n  ProgressButton.prototype.start = function (percent) {\n    this.isPaused = false;\n    this.startProgress(percent ? percent : this.percent, this.progressTime);\n  };\n  /**\n   * Stops the button progress.\n   * @returns void\n   */\n\n\n  ProgressButton.prototype.stop = function () {\n    this.isPaused = true;\n    cancelAnimationFrame(this.timerId);\n  };\n  /**\n   * Complete the button progress.\n   * @returns void\n   */\n\n\n  ProgressButton.prototype.progressComplete = function () {\n    this.isPaused = false;\n    this.finishProgress();\n  };\n  /**\n   * Get component name.\n   * @returns string\n   * @private\n   */\n\n\n  ProgressButton.prototype.getModuleName = function () {\n    return 'progress-btn';\n  };\n  /**\n   * Destroys the widget.\n   * @returns void\n   */\n\n\n  ProgressButton.prototype.destroy = function () {\n    var _this = this;\n\n    var classList = [HIDESPINNER, PROGRESSACTIVE, 'e-round-corner', 'e-' + _super.prototype.getModuleName.call(this), 'e-spin-' + this.spinSettings.position.toLowerCase()];\n    var css;\n\n    _super.prototype.destroy.call(this);\n\n    this.unWireEvents();\n    this.element.innerHTML = '';\n\n    if (this.cssClass) {\n      classList = classList.concat(this.cssClass.split(' '));\n    }\n\n    removeClass([this.element], classList);\n    css = this.element.getAttribute('class') ? ['aria-label', 'aria-valuemin', 'aria-valuemax', 'aria-valuenow'] : ['aria-label', 'aria-valuemin', 'aria-valuemax', 'aria-valuenow', 'class'];\n    css.forEach(function (key) {\n      _this.element.removeAttribute(key);\n    });\n\n    if (this.disabled) {\n      this.element.removeAttribute('disabled');\n    }\n  };\n\n  ProgressButton.prototype.init = function () {\n    this.element.classList.add('e-' + _super.prototype.getModuleName.call(this));\n    this.setContent();\n    this.createSpinner();\n\n    if (this.enableProgress) {\n      this.createProgress();\n    }\n  };\n\n  ProgressButton.prototype.createSpinner = function () {\n    var spinner = this.createElement('span', {\n      className: 'e-spinner'\n    });\n    this.setSpinPosition(spinner);\n    createSpinner({\n      target: spinner,\n      width: this.spinSettings.width || 16,\n      template: this.spinSettings.template\n    }, this.createElement);\n  };\n\n  ProgressButton.prototype.getSpinner = function () {\n    return this.element.getElementsByClassName('e-spinner')[0];\n  };\n\n  ProgressButton.prototype.getProgress = function () {\n    return this.element.getElementsByClassName(PROGRESS)[0];\n  };\n\n  ProgressButton.prototype.setSpinPosition = function (ele) {\n    var position = this.spinSettings.position || 'Left';\n\n    if (position === 'Left' || position === 'Top') {\n      this.element.insertBefore(ele, this.element.getElementsByClassName(CONTENTCLS)[0]);\n    } else {\n      this.element.appendChild(ele);\n    }\n\n    this.element.classList.add('e-spin-' + position.toLowerCase());\n  };\n\n  ProgressButton.prototype.createProgress = function () {\n    this.element.appendChild(this.createElement('span', {\n      className: PROGRESS\n    }));\n  };\n\n  ProgressButton.prototype.setContent = function () {\n    var cont;\n\n    if (isBlazor()) {\n      cont = this.content;\n\n      if (this.enableHtmlSanitizer) {\n        cont = SanitizeHtmlHelper.sanitize(this.content);\n      }\n\n      this.setContentIcon(cont);\n    } else {\n      cont = this.element.innerHTML;\n\n      if (this.enableHtmlSanitizer) {\n        cont = SanitizeHtmlHelper.sanitize(this.element.innerHTML);\n      }\n\n      this.element.innerHTML = '';\n      this.element.appendChild(this.createElement('span', {\n        className: CONTENTCLS,\n        innerHTML: cont\n      }));\n    }\n  };\n\n  ProgressButton.prototype.setContentIcon = function (content) {\n    var contElem = this.createElement('span', {\n      className: CONTENTCLS,\n      innerHTML: content\n    });\n\n    if (this.iconCss) {\n      var span = this.createElement('span', {\n        className: 'e-btn-icon ' + this.iconCss\n      });\n\n      if (!this.element.textContent.trim()) {\n        this.element.classList.add('e-icon-btn');\n      } else {\n        span.classList.add('e-icon-' + this.iconPosition.toLowerCase());\n\n        if (this.iconPosition === 'Top' || this.iconPosition === 'Bottom') {\n          this.element.classList.add('e-' + this.iconPosition.toLowerCase() + '-icon-btn');\n        }\n      }\n\n      var node = contElem.childNodes[0];\n\n      if (node && (this.iconPosition === 'Left' || this.iconPosition === 'Top')) {\n        contElem.insertBefore(span, node);\n      } else {\n        contElem.appendChild(span);\n      }\n    }\n\n    this.element.appendChild(contElem);\n  };\n\n  ProgressButton.prototype.clickHandler = function () {\n    if (this.element.classList.contains(PROGRESSACTIVE)) {\n      return;\n    }\n\n    this.startProgress();\n  };\n\n  ProgressButton.prototype.startProgress = function (percent, progressTime) {\n    var clsList = this.element.classList;\n    var isVertical = clsList.contains('e-vertical');\n    clsList.add(PROGRESSACTIVE);\n\n    if (!clsList.contains(HIDESPINNER)) {\n      showSpinner(this.element);\n    }\n\n    this.startAnimate(Date.now(), progressTime ? progressTime : 0, progressTime ? Date.now() - this.duration * 1 / 100 : Date.now(), percent ? percent : 0, 0, this.step, 0, isVertical);\n    this.startContAnimate();\n  };\n\n  ProgressButton.prototype.startAnimate = function (timestamp, progressTime, prevTime, percent, prevPercent, step, prevProgressTime, isVertical) {\n    var _this = this;\n\n    try {\n      var args = void 0;\n      var timeDiff = timestamp - prevTime;\n      var stepTime = this.duration * step / 100;\n      var timeDiffBuffer_1 = timeDiff ? timeDiff < stepTime ? timeDiff - stepTime : timeDiff % stepTime : 0;\n      this.progressTime = progressTime = progressTime + timeDiff - timeDiffBuffer_1;\n      prevTime = timestamp - timeDiffBuffer_1;\n      percent = percent + (timeDiff - timeDiffBuffer_1) / this.duration * 100;\n      prevPercent = (progressTime - prevProgressTime) % stepTime === 0 || percent === 100 ? percent : prevPercent;\n      args = {\n        percent: prevPercent,\n        currentDuration: progressTime,\n        step: step\n      };\n      this.eIsVertical = isVertical;\n\n      if (percent === 0) {\n        this.trigger('begin', args, function (observedArgs) {\n          _this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer_1, prevTime);\n        });\n      } else if (percent === 100 || progressTime === this.duration) {\n        this.trigger('end', args, function (observedArgs) {\n          _this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer_1, prevTime);\n        });\n      } else {\n        this.trigger('progress', args, function (observedArgs) {\n          _this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer_1, prevTime);\n        });\n      }\n    } catch (e) {\n      cancelAnimationFrame(this.timerId);\n      this.trigger('fail', e);\n    }\n  };\n\n  ProgressButton.prototype.successCallback = function (args, perc, pPerc, prgTim, pPrgTim, timDif, pTim) {\n    var _this = this;\n\n    var percent = perc;\n    var prevPercent = pPerc;\n    var timeDiffBuffer = timDif;\n    var progressTime = prgTim;\n    var prevProgressTime = pPrgTim;\n    var prevTime = pTim;\n    var isVertical = this.eIsVertical;\n\n    if (percent !== args.percent && args.percent !== prevPercent) {\n      percent = args.percent;\n    }\n\n    this.percent = percent;\n    this.step = args.step;\n\n    if ((progressTime - prevProgressTime) % (this.duration * args.step / 100) === 0 || percent === 100) {\n      this.timerId = requestAnimationFrame(function () {\n        if (_this.enableProgress) {\n          _this.getProgress().style[isVertical ? 'height' : 'width'] = percent + '%';\n        }\n\n        _this.element.setAttribute('aria-valuenow', percent.toString());\n      });\n      prevPercent = percent;\n      prevProgressTime = progressTime;\n    }\n\n    if (!this.isPaused) {\n      if (progressTime < this.duration && percent < 100) {\n        this.interval = window.setTimeout(function () {\n          _this.startAnimate(Date.now(), progressTime, prevTime, percent, prevPercent, args.step, prevProgressTime, isVertical); // tslint:disable-next-line\n\n        }, this.duration / 100 - timeDiffBuffer);\n      } else {\n        this.interval = window.setTimeout(function () {\n          _this.progressTime = _this.percent = 0;\n\n          if (_this.enableProgress) {\n            _this.getProgress().style[isVertical ? 'height' : 'width'] = '0%';\n          }\n\n          _this.element.setAttribute('aria-valuenow', '0');\n\n          _this.hideSpin(); // tslint:disable-next-line\n\n        }, 100);\n      }\n    }\n  };\n\n  ProgressButton.prototype.startContAnimate = function () {\n    var _this = this;\n\n    var ele = this.element.getElementsByClassName(CONTENTCLS)[0];\n\n    if (this.animationSettings.effect !== 'None') {\n      new Animation({}).animate(ele, {\n        duration: this.animationSettings.duration,\n        name: 'Progress' + this.animationSettings.effect,\n        timingFunction: this.animationSettings.easing,\n        begin: function () {\n          if (_this.spinSettings.position === 'Center') {\n            _this.setSpinnerSize();\n          }\n        },\n        end: function () {\n          ele.classList.add('e-animate-end');\n        }\n      });\n    } else if (this.spinSettings.position === 'Center') {\n      this.setSpinnerSize();\n    }\n  };\n\n  ProgressButton.prototype.finishProgress = function () {\n    var clsList = this.element.classList;\n    var isVertical = clsList.contains('e-vertical');\n    clsList.add(PROGRESSACTIVE);\n    var args;\n    var count = 100;\n\n    for (var i = this.percent; i < count; i++) {\n      i += 10;\n\n      if (i > 100) {\n        i = 100;\n      }\n\n      if (this.enableProgress) {\n        this.getProgress().style[isVertical ? 'height' : 'width'] = this.percent < 100 ? i + '%' : '100%';\n      }\n    }\n\n    this.element.setAttribute('aria-valuenow', '0');\n    this.hideSpin();\n    args = {\n      step: this.step,\n      currentDuration: this.progressTime,\n      percent: 100\n    };\n    clearTimeout(this.interval);\n    this.trigger('end', args);\n    this.progressTime = this.percent = 0;\n  };\n\n  ProgressButton.prototype.setSpinnerSize = function () {\n    var ele = this.element.getElementsByClassName(CONTENTCLS)[0];\n    var spinner = this.getSpinner();\n    spinner.style.width = Math.max(spinner.offsetWidth, ele.offsetWidth) + 'px';\n    spinner.style.height = Math.max(spinner.offsetHeight, ele.offsetHeight) + 'px';\n    ele.classList.add('e-cont-animate');\n  };\n\n  ProgressButton.prototype.hideSpin = function () {\n    var cont = this.element.getElementsByClassName(CONTENTCLS)[0];\n\n    if (!this.element.classList.contains(HIDESPINNER)) {\n      hideSpinner(this.element);\n    }\n\n    this.element.classList.remove(PROGRESSACTIVE);\n\n    if (this.animationSettings.effect !== 'None') {\n      cont.classList.remove('e-animate-end');\n    }\n\n    if (this.spinSettings.position === 'Center') {\n      var ele = this.getSpinner();\n      cont.classList.remove('e-cont-animate');\n      ele.style.width = 'auto';\n      ele.style.height = 'auto';\n    }\n  };\n\n  ProgressButton.prototype.setIconSpan = function () {\n    var cont = this.element.getElementsByClassName(CONTENTCLS)[0];\n    var iconSpan = this.element.getElementsByClassName('e-btn-icon')[0];\n\n    if (cont.childNodes[0] && (this.iconPosition === 'Left' || this.iconPosition === 'Top')) {\n      cont.insertBefore(iconSpan, cont.childNodes[0]);\n    } else {\n      cont.appendChild(iconSpan);\n    }\n  };\n\n  ProgressButton.prototype.setAria = function () {\n    attributes(this.element, {\n      'aria-label': this.element.textContent + ' progress',\n      'aria-valuemin': '0',\n      'aria-valuemax': '100',\n      'aria-valuenow': '0'\n    });\n  };\n\n  ProgressButton.prototype.wireEvents = function () {\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n  };\n\n  ProgressButton.prototype.unWireEvents = function () {\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   * @param  {ProgressButtonModel} newProp\n   * @param  {ProgressButtonModel} oldProp\n   * @returns void\n   * @private\n   */\n\n\n  ProgressButton.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var ele = this.element;\n\n    _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'content':\n          if (isBlazor()) {\n            var btnElem = this.element.querySelector('.e-btn-content');\n\n            if (this.iconCss) {\n              if (this.iconPosition === 'Left' || this.iconPosition === 'Top') {\n                btnElem.childNodes[1].textContent = this.content;\n              } else {\n                btnElem.childNodes[0].textContent = this.content;\n              }\n            } else {\n              btnElem.textContent = this.content;\n            }\n          } else {\n            this.setContent();\n            this.createSpinner();\n\n            if (this.enableProgress) {\n              this.createProgress();\n            }\n          }\n\n          ele.setAttribute('aria-label', ele.textContent + ' progress');\n          break;\n\n        case 'iconCss':\n          if (!oldProp.iconCss) {\n            this.setIconSpan();\n          }\n\n          break;\n\n        case 'iconPosition':\n          this.setIconSpan();\n          break;\n\n        case 'enableProgress':\n          if (newProp.enableProgress) {\n            this.createProgress();\n          } else {\n            remove(this.getProgress());\n          }\n\n          break;\n\n        case 'spinSettings':\n          if (newProp.spinSettings.position) {\n            ele.classList.remove('e-spin-' + oldProp.spinSettings.position.toLowerCase());\n            this.setSpinPosition(this.getSpinner());\n          }\n\n          if (newProp.spinSettings.template || newProp.spinSettings.width) {\n            ele.removeChild(this.getSpinner());\n            this.createSpinner();\n          }\n\n          break;\n      }\n    }\n  };\n  /**\n   * Sets the focus to ProgressButton\n   * its native method\n   * @public\n   */\n\n\n  ProgressButton.prototype.focusIn = function () {\n    this.element.focus();\n  };\n\n  __decorate([Property(false)], ProgressButton.prototype, \"enableProgress\", void 0);\n\n  __decorate([Property(2000)], ProgressButton.prototype, \"duration\", void 0);\n\n  __decorate([Property('Left')], ProgressButton.prototype, \"iconPosition\", void 0);\n\n  __decorate([Property('')], ProgressButton.prototype, \"iconCss\", void 0);\n\n  __decorate([Property(false)], ProgressButton.prototype, \"disabled\", void 0);\n\n  __decorate([Property(false)], ProgressButton.prototype, \"isPrimary\", void 0);\n\n  __decorate([Property('')], ProgressButton.prototype, \"cssClass\", void 0);\n\n  __decorate([Property('')], ProgressButton.prototype, \"content\", void 0);\n\n  __decorate([Property(false)], ProgressButton.prototype, \"isToggle\", void 0);\n\n  __decorate([Property(false)], ProgressButton.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate([Complex({}, SpinSettings)], ProgressButton.prototype, \"spinSettings\", void 0);\n\n  __decorate([Complex({}, AnimationSettings)], ProgressButton.prototype, \"animationSettings\", void 0);\n\n  __decorate([Event()], ProgressButton.prototype, \"created\", void 0);\n\n  __decorate([Event()], ProgressButton.prototype, \"begin\", void 0);\n\n  __decorate([Event()], ProgressButton.prototype, \"progress\", void 0);\n\n  __decorate([Event()], ProgressButton.prototype, \"end\", void 0);\n\n  __decorate([Event()], ProgressButton.prototype, \"fail\", void 0);\n\n  ProgressButton = __decorate([NotifyPropertyChanges], ProgressButton);\n  return ProgressButton;\n}(Button);\n\nexport { ProgressButton };","map":null,"metadata":{},"sourceType":"module"}