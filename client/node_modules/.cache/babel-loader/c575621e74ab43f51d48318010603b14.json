{"ast":null,"code":"/**\r\n * DevExtreme (ui/load_panel.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\");\n\nvar noop = require(\"../core/utils/common\").noop;\n\nvar messageLocalization = require(\"../localization/message\");\n\nvar registerComponent = require(\"../core/component_registrator\");\n\nvar extend = require(\"../core/utils/extend\").extend;\n\nvar LoadIndicator = require(\"./load_indicator\");\n\nvar Overlay = require(\"./overlay\");\n\nvar Deferred = require(\"../core/utils/deferred\").Deferred;\n\nvar themes = require(\"./themes\");\n\nvar LOADPANEL_CLASS = \"dx-loadpanel\";\nvar LOADPANEL_WRAPPER_CLASS = \"dx-loadpanel-wrapper\";\nvar LOADPANEL_INDICATOR_CLASS = \"dx-loadpanel-indicator\";\nvar LOADPANEL_MESSAGE_CLASS = \"dx-loadpanel-message\";\nvar LOADPANEL_CONTENT_CLASS = \"dx-loadpanel-content\";\nvar LOADPANEL_CONTENT_WRAPPER_CLASS = \"dx-loadpanel-content-wrapper\";\nvar LOADPANEL_PANE_HIDDEN_CLASS = \"dx-loadpanel-pane-hidden\";\nvar LoadPanel = Overlay.inherit({\n  _supportedKeys: function () {\n    return extend(this.callBase(), {\n      escape: noop\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      message: messageLocalization.format(\"Loading\"),\n      width: 222,\n      height: 90,\n      animation: null,\n      showIndicator: true,\n      indicatorSrc: \"\",\n      showPane: true,\n      delay: 0,\n      templatesRenderAsynchronously: false,\n      hideTopOverlayHandler: null,\n      resizeEnabled: false,\n      focusStateEnabled: false\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: {\n        platform: \"generic\"\n      },\n      options: {\n        shadingColor: \"transparent\"\n      }\n    }, {\n      device: function () {\n        return themes.isMaterial();\n      },\n      options: {\n        message: \"\",\n        width: 60,\n        height: 60,\n        maxHeight: 60,\n        maxWidth: 60\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase.apply(this, arguments);\n  },\n  _render: function () {\n    this.callBase();\n    this.$element().addClass(LOADPANEL_CLASS);\n\n    this._wrapper().addClass(LOADPANEL_WRAPPER_CLASS);\n  },\n  _renderContentImpl: function () {\n    this.callBase();\n    this.$content().addClass(LOADPANEL_CONTENT_CLASS);\n    this._$contentWrapper = $(\"<div>\").addClass(LOADPANEL_CONTENT_WRAPPER_CLASS);\n\n    this._$contentWrapper.appendTo(this._$content);\n\n    this._togglePaneVisible();\n\n    this._cleanPreviousContent();\n\n    this._renderLoadIndicator();\n\n    this._renderMessage();\n  },\n  _show: function () {\n    var delay = this.option(\"delay\");\n\n    if (!delay) {\n      return this.callBase();\n    }\n\n    var deferred = new Deferred();\n    var callBase = this.callBase.bind(this);\n\n    this._clearShowTimeout();\n\n    this._showTimeout = setTimeout(function () {\n      callBase().done(function () {\n        deferred.resolve();\n      });\n    }, delay);\n    return deferred.promise();\n  },\n  _hide: function () {\n    this._clearShowTimeout();\n\n    return this.callBase();\n  },\n  _clearShowTimeout: function () {\n    clearTimeout(this._showTimeout);\n  },\n  _renderMessage: function () {\n    if (!this._$contentWrapper) {\n      return;\n    }\n\n    var message = this.option(\"message\");\n\n    if (!message) {\n      return;\n    }\n\n    var $message = $(\"<div>\").addClass(LOADPANEL_MESSAGE_CLASS).text(message);\n\n    this._$contentWrapper.append($message);\n  },\n  _renderLoadIndicator: function () {\n    if (!this._$contentWrapper || !this.option(\"showIndicator\")) {\n      return;\n    }\n\n    this._$indicator = $(\"<div>\").addClass(LOADPANEL_INDICATOR_CLASS).appendTo(this._$contentWrapper);\n\n    this._createComponent(this._$indicator, LoadIndicator, {\n      indicatorSrc: this.option(\"indicatorSrc\")\n    });\n  },\n  _cleanPreviousContent: function () {\n    this.$content().find(\".\" + LOADPANEL_MESSAGE_CLASS).remove();\n    this.$content().find(\".\" + LOADPANEL_INDICATOR_CLASS).remove();\n  },\n  _togglePaneVisible: function () {\n    this.$content().toggleClass(LOADPANEL_PANE_HIDDEN_CLASS, !this.option(\"showPane\"));\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"delay\":\n        break;\n\n      case \"message\":\n      case \"showIndicator\":\n        this._cleanPreviousContent();\n\n        this._renderLoadIndicator();\n\n        this._renderMessage();\n\n        break;\n\n      case \"showPane\":\n        this._togglePaneVisible();\n\n        break;\n\n      case \"indicatorSrc\":\n        if (this._$indicator) {\n          this._createComponent(this._$indicator, LoadIndicator, {\n            indicatorSrc: this.option(\"indicatorSrc\")\n          });\n        }\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _dispose: function () {\n    this._clearShowTimeout();\n\n    this.callBase();\n  }\n});\nregisterComponent(\"dxLoadPanel\", LoadPanel);\nmodule.exports = LoadPanel;\nmodule.exports.default = module.exports;","map":null,"metadata":{},"sourceType":"script"}