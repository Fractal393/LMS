{"ast":null,"code":"/**\n * PdfPageTemplateElement.ts class for EJ2-Pdf\n */\nimport { PdfDockStyle, PdfAlignmentStyle, TemplateType } from './enum';\nimport { PointF, SizeF } from './../drawing/pdf-drawing';\nimport { PdfTemplate } from './../graphics/figures/pdf-template';\nimport { PdfPage } from './pdf-page';\nimport { RectangleF } from './../drawing/pdf-drawing';\n/**\n * Describes a `page template` object that can be used as header/footer, watermark or stamp.\n */\n\nvar PdfPageTemplateElement =\n/** @class */\nfunction () {\n  /* tslint:disable */\n  function PdfPageTemplateElement(arg1, arg2, arg3, arg4, arg5) {\n    if (arg1 instanceof RectangleF && typeof arg2 === 'undefined') {\n      this.InitiateBounds(arg1.x, arg1.y, arg1.width, arg1.height, null);\n    } else if (arg1 instanceof RectangleF && arg2 instanceof PdfPage && typeof arg3 === 'undefined') {\n      this.InitiateBounds(arg1.x, arg1.y, arg1.width, arg1.height, arg2);\n    } else if (arg1 instanceof PointF && arg2 instanceof SizeF && typeof arg3 === 'undefined') {\n      this.InitiateBounds(arg1.x, arg1.y, arg2.width, arg2.height, null);\n    } else if (arg1 instanceof PointF && arg2 instanceof SizeF && arg3 instanceof PdfPage && typeof arg4 === 'undefined') {\n      this.InitiateBounds(arg1.x, arg1.y, arg2.width, arg2.height, arg3);\n    } else if (arg1 instanceof SizeF && typeof arg2 === 'undefined') {\n      this.InitiateBounds(0, 0, arg1.width, arg1.height, null);\n    } else if (typeof arg1 === 'number' && typeof arg2 === 'number' && typeof arg3 === 'undefined') {\n      this.InitiateBounds(0, 0, arg1, arg2, null);\n    } else if (typeof arg1 === 'number' && typeof arg2 === 'number' && arg3 instanceof PdfPage && typeof arg4 === 'undefined') {\n      this.InitiateBounds(0, 0, arg1, arg2, arg3);\n    } else if (typeof arg1 === 'number' && typeof arg2 === 'number' && typeof arg3 === 'number' && typeof arg4 === 'number' && typeof arg5 === 'undefined') {\n      this.InitiateBounds(arg1, arg2, arg3, arg4, null);\n    } else {\n      this.InitiateBounds(arg1, arg2, arg3, arg4, null); // this.graphics.colorSpace = this.page.document.colorSpace;\n    }\n    /* tslint:enable */\n\n  }\n\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"dock\", {\n    // Properties\n\n    /**\n     * Gets or sets the `dock style` of the page template element.\n     * @private\n     */\n    get: function () {\n      return this.dockStyle;\n    },\n    set: function (value) {\n      // if (this.dockStyle !== value && this.Type === TemplateType.None) {\n      this.dockStyle = value; // Reset alignment.\n\n      this.resetAlignment(); // }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"alignment\", {\n    /**\n     * Gets or sets `alignment` of the page template element.\n     * @private\n     */\n    get: function () {\n      return this.alignmentStyle;\n    },\n    set: function (value) {\n      // if (this.alignmentStyle !== value) {\n      this.setAlignment(value); // }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"foreground\", {\n    /**\n     * Indicates whether the page template is located `in front of the page layers or behind of it`.\n     * @private\n     */\n    get: function () {\n      return this.isForeground;\n    },\n    set: function (value) {\n      // if (this.foreground !== value) {\n      this.isForeground = value; // }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"background\", {\n    /**\n     * Indicates whether the page template is located `behind of the page layers or in front of it`.\n     * @private\n     */\n    get: function () {\n      return !this.isForeground;\n    },\n    set: function (value) {\n      this.isForeground = !value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"location\", {\n    /**\n     * Gets or sets `location` of the page template element.\n     * @private\n     */\n    get: function () {\n      return this.currentLocation;\n    },\n    set: function (value) {\n      if (this.type === TemplateType.None) {\n        this.currentLocation = value;\n      } else {//\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"x\", {\n    /**\n     * Gets or sets `X` co-ordinate of the template element on the page.\n     * @private\n     */\n    get: function () {\n      var value = typeof this.currentLocation !== 'undefined' ? this.currentLocation.x : 0;\n      return value;\n    },\n    set: function (value) {\n      if (this.type === TemplateType.None) {\n        this.currentLocation.x = value;\n      } else {//\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"y\", {\n    /**\n     * Gets or sets `Y` co-ordinate of the template element on the page.\n     * @private\n     */\n    get: function () {\n      var value = typeof this.currentLocation !== 'undefined' ? this.currentLocation.y : 0;\n      return value;\n    },\n    set: function (value) {\n      if (this.type === TemplateType.None) {\n        this.currentLocation.y = value;\n      } else {//\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"size\", {\n    /**\n     * Gets or sets `size` of the page template element.\n     * @private\n     */\n    get: function () {\n      return this.template.size;\n    },\n    set: function (value) {\n      if (this.type === TemplateType.None) {\n        this.template.reset(value);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"width\", {\n    /**\n     * Gets or sets `width` of the page template element.\n     * @private\n     */\n    get: function () {\n      return this.template.width;\n    },\n    set: function (value) {\n      if (this.template.width !== value && this.type === TemplateType.None) {\n        var size = this.template.size;\n        size.width = value;\n        this.template.reset(size);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"height\", {\n    /**\n     * Gets or sets `height` of the page template element.\n     * @private\n     */\n    get: function () {\n      return this.template.height;\n    },\n    set: function (value) {\n      if (this.template.height !== value && this.type === TemplateType.None) {\n        var size = this.template.size;\n        size.height = value;\n        this.template.reset(size);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"graphics\", {\n    /**\n     * Gets `graphics` context of the page template element.\n     * @private\n     */\n    get: function () {\n      return this.template.graphics;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"template\", {\n    /**\n     * Gets Pdf `template` object.\n     * @private\n     */\n    get: function () {\n      // if (typeof this.pdfTemplate === 'undefined' || this.pdfTemplate == null) {\n      //     this.pdfTemplate = new PdfTemplate(this.size);\n      // }\n      return this.pdfTemplate;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"type\", {\n    /**\n     * Gets or sets `type` of the usage of this page template.\n     * @private\n     */\n    get: function () {\n      return this.templateType;\n    },\n    set: function (value) {\n      this.updateDocking(value);\n      this.templateType = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PdfPageTemplateElement.prototype, \"bounds\", {\n    /**\n     * Gets or sets `bounds` of the page template.\n     * @public\n     */\n    get: function () {\n      return new RectangleF(new PointF(this.x, this.y), this.size);\n    },\n    set: function (value) {\n      if (this.type === TemplateType.None) {\n        this.location = new PointF(value.x, value.y);\n        this.size = new SizeF(value.width, value.height);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * `Initialize Bounds` Initialize the bounds value of the template.\n   * @private\n   */\n\n  PdfPageTemplateElement.prototype.InitiateBounds = function (arg1, arg2, arg3, arg4, arg5) {\n    this.x = arg1;\n    this.y = arg2;\n    this.pdfTemplate = new PdfTemplate(arg3, arg4); // this.graphics.colorSpace = this.page.document.colorSpace;\n  };\n  /**\n   * `Updates Dock` property if template is used as header/footer.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.updateDocking = function (type) {\n    if (type !== TemplateType.None) {\n      switch (type) {\n        case TemplateType.Top:\n          this.dock = PdfDockStyle.Top;\n          break;\n\n        case TemplateType.Bottom:\n          this.dock = PdfDockStyle.Bottom;\n          break;\n\n        case TemplateType.Left:\n          this.dock = PdfDockStyle.Left;\n          break;\n\n        case TemplateType.Right:\n          this.dock = PdfDockStyle.Right;\n          break;\n      }\n\n      this.resetAlignment();\n    }\n  };\n  /**\n   * `Resets alignment` of the template.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.resetAlignment = function () {\n    this.alignment = PdfAlignmentStyle.None;\n  };\n  /**\n   * `Sets alignment` of the template.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.setAlignment = function (alignment) {\n    if (this.dock === PdfDockStyle.None) {\n      this.alignmentStyle = alignment;\n    } else {\n      // Template is docked and alignment has been changed.\n      var canBeSet = false;\n\n      switch (this.dock) {\n        case PdfDockStyle.Left:\n          canBeSet = alignment === PdfAlignmentStyle.TopLeft || alignment === PdfAlignmentStyle.MiddleLeft || alignment === PdfAlignmentStyle.BottomLeft || alignment === PdfAlignmentStyle.None;\n          break;\n\n        case PdfDockStyle.Top:\n          canBeSet = alignment === PdfAlignmentStyle.TopLeft || alignment === PdfAlignmentStyle.TopCenter || alignment === PdfAlignmentStyle.TopRight || alignment === PdfAlignmentStyle.None;\n          break;\n\n        case PdfDockStyle.Right:\n          canBeSet = alignment === PdfAlignmentStyle.TopRight || alignment === PdfAlignmentStyle.MiddleRight || alignment === PdfAlignmentStyle.BottomRight || alignment === PdfAlignmentStyle.None;\n          break;\n\n        case PdfDockStyle.Bottom:\n          canBeSet = alignment === PdfAlignmentStyle.BottomLeft || alignment === PdfAlignmentStyle.BottomCenter || alignment === PdfAlignmentStyle.BottomRight || alignment === PdfAlignmentStyle.None;\n          break;\n\n        case PdfDockStyle.Fill:\n          canBeSet = alignment === PdfAlignmentStyle.MiddleCenter || alignment === PdfAlignmentStyle.None;\n          break;\n      }\n\n      if (canBeSet) {\n        this.alignmentStyle = alignment;\n      }\n    }\n  };\n  /**\n   * Draws the template.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.draw = function (layer, document) {\n    var page = layer.page;\n    var bounds = this.calculateBounds(page, document);\n\n    if (bounds.x === -0) {\n      bounds.x = 0;\n    }\n\n    layer.graphics.drawPdfTemplate(this.template, new PointF(bounds.x, bounds.y), new SizeF(bounds.width, bounds.height));\n  };\n  /**\n   * Calculates bounds of the page template.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.calculateBounds = function (page, document) {\n    var result = this.bounds;\n\n    if (this.alignmentStyle !== PdfAlignmentStyle.None) {\n      result = this.getAlignmentBounds(page, document);\n    } else if (this.dockStyle !== PdfDockStyle.None) {\n      result = this.getDockBounds(page, document);\n    }\n\n    return result;\n  };\n  /**\n   * Calculates bounds according to the alignment.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.getAlignmentBounds = function (page, document) {\n    var result = this.bounds;\n\n    if (this.type === TemplateType.None) {\n      result = this.getSimpleAlignmentBounds(page, document);\n    } else {\n      result = this.getTemplateAlignmentBounds(page, document);\n    }\n\n    return result;\n  };\n  /**\n   * Calculates bounds according to the alignment.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.getSimpleAlignmentBounds = function (page, document) {\n    var bounds = this.bounds;\n    var pdfSection = page.section;\n    var actualBounds = pdfSection.getActualBounds(document, page, false);\n    var x = this.x;\n    var y = this.y;\n\n    switch (this.alignmentStyle) {\n      case PdfAlignmentStyle.TopLeft:\n        x = 0;\n        y = 0;\n        break;\n\n      case PdfAlignmentStyle.TopCenter:\n        x = (actualBounds.width - this.width) / 2;\n        y = 0;\n        break;\n\n      case PdfAlignmentStyle.TopRight:\n        x = actualBounds.width - this.width;\n        y = 0;\n        break;\n\n      case PdfAlignmentStyle.MiddleLeft:\n        x = 0;\n        y = (actualBounds.height - this.height) / 2;\n        break;\n\n      case PdfAlignmentStyle.MiddleCenter:\n        x = (actualBounds.width - this.width) / 2;\n        y = (actualBounds.height - this.height) / 2;\n        break;\n\n      case PdfAlignmentStyle.MiddleRight:\n        x = actualBounds.width - this.width;\n        y = (actualBounds.height - this.height) / 2;\n        break;\n\n      case PdfAlignmentStyle.BottomLeft:\n        x = 0;\n        y = actualBounds.height - this.height;\n        break;\n\n      case PdfAlignmentStyle.BottomCenter:\n        x = (actualBounds.width - this.width) / 2;\n        y = actualBounds.height - this.height;\n        break;\n\n      case PdfAlignmentStyle.BottomRight:\n        x = actualBounds.width - this.width;\n        y = actualBounds.height - this.height;\n        break;\n    }\n\n    bounds.x = x;\n    bounds.y = y;\n    return bounds;\n  };\n  /**\n   * Calculates bounds according to the alignment.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.getTemplateAlignmentBounds = function (page, document) {\n    var result = this.bounds;\n    var section = page.section;\n    var actualBounds = section.getActualBounds(document, page, false);\n    var x = this.x;\n    var y = this.y;\n\n    switch (this.alignmentStyle) {\n      case PdfAlignmentStyle.TopLeft:\n        if (this.type === TemplateType.Left) {\n          x = -actualBounds.x;\n          y = 0;\n        } else if (this.type === TemplateType.Top) {\n          x = -actualBounds.x;\n          y = -actualBounds.y;\n        }\n\n        break;\n\n      case PdfAlignmentStyle.TopCenter:\n        x = (actualBounds.width - this.width) / 2;\n        y = -actualBounds.y;\n        break;\n\n      case PdfAlignmentStyle.TopRight:\n        if (this.type === TemplateType.Right) {\n          x = actualBounds.width + section.getRightIndentWidth(document, page, false) - this.width;\n          y = 0;\n        } else if (this.type === TemplateType.Top) {\n          x = actualBounds.width + section.getRightIndentWidth(document, page, false) - this.width;\n          y = -actualBounds.y;\n        }\n\n        break;\n\n      case PdfAlignmentStyle.MiddleLeft:\n        x = -actualBounds.x;\n        y = (actualBounds.height - this.height) / 2;\n        break;\n\n      case PdfAlignmentStyle.MiddleCenter:\n        x = (actualBounds.width - this.width) / 2;\n        y = (actualBounds.height - this.height) / 2;\n        break;\n\n      case PdfAlignmentStyle.MiddleRight:\n        x = actualBounds.width + section.getRightIndentWidth(document, page, false) - this.width;\n        y = (actualBounds.height - this.height) / 2;\n        break;\n\n      case PdfAlignmentStyle.BottomLeft:\n        if (this.type === TemplateType.Left) {\n          x = -actualBounds.x;\n          y = actualBounds.height - this.height;\n        } else if (this.type === TemplateType.Bottom) {\n          x = -actualBounds.x;\n          y = actualBounds.height + section.getBottomIndentHeight(document, page, false) - this.height;\n        }\n\n        break;\n\n      case PdfAlignmentStyle.BottomCenter:\n        x = (actualBounds.width - this.width) / 2;\n        y = actualBounds.height + section.getBottomIndentHeight(document, page, false) - this.height;\n        break;\n\n      case PdfAlignmentStyle.BottomRight:\n        if (this.type === TemplateType.Right) {\n          x = actualBounds.width + section.getRightIndentWidth(document, page, false) - this.width;\n          y = actualBounds.height - this.height;\n        } else if (this.type === TemplateType.Bottom) {\n          x = actualBounds.width + section.getRightIndentWidth(document, page, false) - this.width;\n          y = actualBounds.height + section.getBottomIndentHeight(document, page, false) - this.height;\n        }\n\n        break;\n    }\n\n    result.x = x;\n    result.y = y;\n    return result;\n  };\n  /**\n   * Calculates bounds according to the docking.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.getDockBounds = function (page, document) {\n    var result = this.bounds;\n\n    if (this.type === TemplateType.None) {\n      result = this.getSimpleDockBounds(page, document);\n    } else {\n      result = this.getTemplateDockBounds(page, document);\n    }\n\n    return result;\n  };\n  /**\n   * Calculates bounds according to the docking.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.getSimpleDockBounds = function (page, document) {\n    var result = this.bounds;\n    var section = page.section;\n    var actualBounds = section.getActualBounds(document, page, false);\n    var x = this.x;\n    var y = this.y;\n    var width = this.width;\n    var height = this.height;\n\n    switch (this.dockStyle) {\n      case PdfDockStyle.Left:\n        x = 0;\n        y = 0;\n        width = this.width;\n        height = actualBounds.height;\n        break;\n\n      case PdfDockStyle.Top:\n        x = 0;\n        y = 0;\n        width = actualBounds.width;\n        height = this.height;\n        break;\n\n      case PdfDockStyle.Right:\n        x = actualBounds.width - this.width;\n        y = 0;\n        width = this.width;\n        height = actualBounds.height;\n        break;\n\n      case PdfDockStyle.Bottom:\n        x = 0;\n        y = actualBounds.height - this.height;\n        width = actualBounds.width;\n        height = this.height;\n        break;\n\n      case PdfDockStyle.Fill:\n        x = 0;\n        x = 0;\n        width = actualBounds.width;\n        height = actualBounds.height;\n        break;\n    }\n\n    result = new RectangleF(x, y, width, height);\n    return result;\n  };\n  /**\n   * Calculates template bounds basing on docking if template is a page template.\n   * @private\n   */\n\n\n  PdfPageTemplateElement.prototype.getTemplateDockBounds = function (page, document) {\n    var result = this.bounds;\n    var section = page.section;\n    var actualBounds = section.getActualBounds(document, page, false);\n    var actualSize = section.pageSettings.getActualSize();\n    var x = this.x;\n    var y = this.y;\n    var width = this.width;\n    var height = this.height;\n\n    switch (this.dockStyle) {\n      case PdfDockStyle.Left:\n        x = -actualBounds.x;\n        y = 0;\n        width = this.width;\n        height = actualBounds.height;\n        break;\n\n      case PdfDockStyle.Top:\n        x = -actualBounds.x;\n        y = -actualBounds.y;\n        width = actualSize.width;\n        height = this.height;\n\n        if (actualBounds.height < 0) {\n          y = -actualBounds.y + actualSize.height;\n        }\n\n        break;\n\n      case PdfDockStyle.Right:\n        x = actualBounds.width + section.getRightIndentWidth(document, page, false) - this.width;\n        y = 0;\n        width = this.width;\n        height = actualBounds.height;\n        break;\n\n      case PdfDockStyle.Bottom:\n        x = -actualBounds.x;\n        y = actualBounds.height + section.getBottomIndentHeight(document, page, false) - this.height;\n        width = actualSize.width;\n        height = this.height;\n\n        if (actualBounds.height < 0) {\n          y -= actualSize.height;\n        }\n\n        break;\n\n      case PdfDockStyle.Fill:\n        x = 0;\n        x = 0;\n        width = actualBounds.width;\n        height = actualBounds.height;\n        break;\n    }\n\n    result = new RectangleF(x, y, width, height);\n    return result;\n  };\n\n  return PdfPageTemplateElement;\n}();\n\nexport { PdfPageTemplateElement };","map":null,"metadata":{},"sourceType":"module"}