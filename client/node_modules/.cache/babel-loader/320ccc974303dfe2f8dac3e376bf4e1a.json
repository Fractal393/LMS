{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { remove, extend } from '@syncfusion/ej2-base';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from './virtual-content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\n/**\n * VirtualFreezeRenderer is used to render the virtual table within the frozen table\n * @hidden\n */\n\nvar VirtualFreezeRenderer =\n/** @class */\nfunction (_super) {\n  __extends(VirtualFreezeRenderer, _super);\n\n  function VirtualFreezeRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n\n    _this.frzeeLoad = 1;\n    _this.serviceLoc = locator;\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.renderTable = function () {\n    this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n    this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n    this.virtualRenderer.setPanel(this.parent.getContent());\n    this.virtualRenderer.renderTable();\n    var virtualTable = this.parent.getContent().querySelector('.e-virtualtable');\n    var virtualTrack = this.parent.getContent().querySelector('.e-virtualtrack');\n    virtualTrack.style.position = '';\n    this.getFrozenContent().appendChild(virtualTable);\n    this.getFrozenContent().appendChild(virtualTrack);\n    var mTbl = virtualTable.cloneNode(true);\n    var mTblT = virtualTrack.cloneNode(true);\n    this.getMovableContent().appendChild(mTbl);\n    this.getMovableContent().appendChild(mTblT);\n    remove(this.getMovableContent().querySelector('colgroup'));\n    var colGroup = this.parent.getMovableVirtualHeader().querySelector('colgroup').cloneNode(true);\n    mTbl.firstElementChild.insertBefore(colGroup, mTbl.firstElementChild.querySelector('tbody'));\n    this.setTable(this.parent.element.querySelector('.e-frozencontent').querySelector('.e-table'));\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n    this.virtualRenderer.appendContent(target, newChild, e);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.generateRows = function (data, notifyArgs) {\n    var virtualRows = this.virtualRenderer.vgenerator.generateRows(data, notifyArgs);\n    var arr = [];\n    arr = virtualRows.map(function (row) {\n      return extend({}, row);\n    });\n\n    if (!this.firstPageRecords) {\n      this.firstPageRecords = data;\n    }\n\n    var rows = this.freezeRowGenerator.generateRows(data, notifyArgs, arr);\n    return rows;\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n    return this.virtualRenderer.getRowByIndex(index);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n    return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getMovableRows = function () {\n    return this.virtualRenderer.vgenerator.getRows();\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getRows = function () {\n    return this.getMovableRows();\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getColGroup = function () {\n    var mCol = this.parent.getMovableVirtualContent().querySelector('colgroup');\n    var fCol = this.parent.getFrozenVirtualContent().querySelector('colgroup');\n    var colGroup = this.isXaxis() ? mCol : fCol;\n    return colGroup;\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n    var rows;\n    var bIndex = args.virtualInfo.blockIndexes;\n    var colIndex = args.virtualInfo.columnIndexes;\n    var page = args.virtualInfo.page;\n    args.virtualInfo.blockIndexes = [1, 2];\n    args.virtualInfo.page = 1;\n\n    if (!args.renderMovableContent) {\n      args.virtualInfo.columnIndexes = [];\n    }\n\n    var virtualRows = this.virtualRenderer.vgenerator.generateRows(this.firstPageRecords, args);\n    rows = this.splitReorderedRows(virtualRows);\n    args.virtualInfo.blockIndexes = bIndex;\n    args.virtualInfo.columnIndexes = colIndex;\n    args.virtualInfo.page = page;\n    return rows.splice(0, this.parent.frozenRows);\n  };\n\n  VirtualFreezeRenderer.prototype.splitReorderedRows = function (rows) {\n    var frzCols = this.parent.getFrozenColumns();\n\n    for (var i = 0, len = rows.length; i < len; i++) {\n      if (this.frzeeLoad % 2 === 0) {\n        rows[i].cells = rows[i].cells.slice(frzCols, rows[i].cells.length);\n      } else {\n        rows[i].isFreezeRow = true;\n        rows[i].cells = rows[i].cells.slice(0, frzCols);\n      }\n    }\n\n    this.frzeeLoad++;\n    return rows;\n  };\n\n  VirtualFreezeRenderer.prototype.isXaxis = function () {\n    var value = false;\n\n    if (this.virtualRenderer) {\n      value = this.virtualRenderer.requestType === 'virtualscroll' && this.virtualRenderer.currentInfo.sentinelInfo.axis === 'X';\n    }\n\n    return value;\n  };\n\n  VirtualFreezeRenderer.prototype.getHeaderCells = function () {\n    var content = this.isXaxis() ? this.parent.getMovableVirtualHeader() : this.parent.getHeaderContent();\n    return content ? [].slice.call(content.querySelectorAll('.e-headercell:not(.e-stackedheadercell)')) : [];\n  };\n\n  VirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n    var headerTable;\n\n    if (this.isXaxis()) {\n      headerTable = this.parent.getMovableVirtualHeader().querySelector('.e-table');\n    } else {\n      headerTable = this.parent.getFrozenVirtualHeader().querySelector('.e-table');\n    }\n\n    return headerTable;\n  };\n\n  VirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n    var frozenCols = this.parent.columns.slice(0, this.parent.getFrozenColumns());\n    columns = frozenCols.concat(columns);\n    return columns;\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n    return this.virtualRenderer.getRowObjectByIndex(index);\n  };\n\n  return VirtualFreezeRenderer;\n}(FreezeContentRender);\n\nexport { VirtualFreezeRenderer };\n\nvar VirtualFreezeHdrRenderer =\n/** @class */\nfunction (_super) {\n  __extends(VirtualFreezeHdrRenderer, _super);\n\n  function VirtualFreezeHdrRenderer(parent, locator) {\n    var _this = _super.call(this, parent, locator) || this;\n\n    _this.serviceLoc = locator;\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeHdrRenderer.prototype.renderTable = function () {\n    this.virtualHdrRenderer = new VirtualHeaderRenderer(this.parent, this.serviceLoc);\n    this.virtualEle = this.virtualHdrRenderer.virtualEle;\n    this.virtualHdrRenderer.setPanel(this.parent.getHeaderContent());\n    this.virtualHdrRenderer.renderTable();\n    this.rfhMovable();\n    this.updateColgroup();\n    this.initializeHeaderDrag();\n    this.initializeHeaderDrop();\n    this.setTable(this.parent.element.querySelector('.e-frozenheader').querySelector('.e-table'));\n    this.parent.notify(events.headerRefreshed, {\n      rows: this.rows,\n      args: {\n        isFrozen: false\n      }\n    });\n  };\n\n  VirtualFreezeHdrRenderer.prototype.rfhMovable = function () {\n    var fvTbl = this.parent.getHeaderContent().querySelector('.e-virtualtable');\n    var fvTck = this.parent.getHeaderContent().querySelector('.e-virtualtrack');\n    this.getFrozenHeader().appendChild(fvTbl);\n    this.getFrozenHeader().appendChild(fvTck);\n    this.virtualHdrRenderer.virtualEle.table = this.createTable();\n    this.virtualHdrRenderer.virtualEle.renderWrapper();\n    this.virtualHdrRenderer.virtualEle.renderPlaceHolder();\n    var mvTbl = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-virtualtable'));\n    var mvTck = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-virtualtrack'));\n    this.getMovableHeader().appendChild(mvTbl[1]);\n    this.getMovableHeader().appendChild(mvTck[1]);\n  };\n  /**\n   * @hidden\n   */\n\n\n  VirtualFreezeHdrRenderer.prototype.getTable = function () {\n    return this.virtualHdrRenderer.getTable();\n  };\n\n  return VirtualFreezeHdrRenderer;\n}(FreezeRender);\n\nexport { VirtualFreezeHdrRenderer };","map":null,"metadata":{},"sourceType":"module"}