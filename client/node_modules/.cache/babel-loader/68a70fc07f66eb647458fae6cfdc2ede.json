{"ast":null,"code":"/**\r\n * DevExtreme (ui/button_group.js)\r\n * Version: 20.1.6\r\n * Build date: Fri Jul 17 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../core/renderer\");\n\nvar _renderer2 = _interopRequireDefault(_renderer);\n\nvar _ui = require(\"./widget/ui.widget\");\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _button = require(\"./button\");\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _uiCollection_widget = require(\"./collection/ui.collection_widget.edit\");\n\nvar _uiCollection_widget2 = _interopRequireDefault(_uiCollection_widget);\n\nvar _component_registrator = require(\"../core/component_registrator\");\n\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _bindable_template = require(\"../core/templates/bindable_template\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar BUTTON_GROUP_CLASS = \"dx-buttongroup\";\nvar BUTTON_GROUP_WRAPPER_CLASS = BUTTON_GROUP_CLASS + \"-wrapper\";\nvar BUTTON_GROUP_ITEM_CLASS = BUTTON_GROUP_CLASS + \"-item\";\nvar BUTTON_GROUP_FIRST_ITEM_CLASS = BUTTON_GROUP_CLASS + \"-first-item\";\nvar BUTTON_GROUP_LAST_ITEM_CLASS = BUTTON_GROUP_CLASS + \"-last-item\";\nvar BUTTON_GROUP_ITEM_HAS_WIDTH = BUTTON_GROUP_ITEM_CLASS + \"-has-width\";\nvar SHAPE_STANDARD_CLASS = \"dx-shape-standard\";\n\nvar ButtonCollection = _uiCollection_widget2.default.inherit({\n  _initTemplates: function () {\n    var _this = this;\n\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      item: new _bindable_template.BindableTemplate(function ($container, data, model) {\n        _this._prepareItemStyles($container);\n\n        _this._createComponent($container, _button2.default, (0, _extend.extend)({}, model, data, _this._getBasicButtonOptions(), {\n          _templateData: model,\n          template: model.template || _this.option(\"buttonTemplate\")\n        }));\n      }, [\"text\", \"type\", \"icon\", \"disabled\", \"visible\", \"hint\"], this.option(\"integrationOptions.watchMethod\"))\n    });\n  },\n  _getBasicButtonOptions: function () {\n    return {\n      focusStateEnabled: false,\n      onClick: null,\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      activeStateEnabled: this.option(\"activeStateEnabled\"),\n      stylingMode: this.option(\"stylingMode\")\n    };\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      itemTemplateProperty: null\n    });\n  },\n  _prepareItemStyles: function ($item) {\n    var itemIndex = $item.data(\"dxItemIndex\");\n    0 === itemIndex && $item.addClass(BUTTON_GROUP_FIRST_ITEM_CLASS);\n    var items = this.option(\"items\");\n    items && itemIndex === items.length - 1 && $item.addClass(BUTTON_GROUP_LAST_ITEM_CLASS);\n    $item.addClass(SHAPE_STANDARD_CLASS);\n  },\n  _renderItemContent: function (args) {\n    args.container = (0, _renderer2.default)(args.container).parent();\n    return this.callBase(args);\n  },\n  _renderItemContentByNode: function (args, $node) {\n    args.container = (0, _renderer2.default)(args.container.children().first());\n    return this.callBase(args, $node);\n  },\n  _focusTarget: function () {\n    return this.$element().parent();\n  },\n  _keyboardEventBindingTarget: function () {\n    return this._focusTarget();\n  },\n  _refreshContent: function () {\n    this._prepareContent();\n\n    this._renderContent();\n  },\n  _itemClass: function () {\n    return BUTTON_GROUP_ITEM_CLASS;\n  },\n  _itemSelectHandler: function (e) {\n    if (\"single\" === this.option(\"selectionMode\") && this.isItemSelected(e.currentTarget)) {\n      return;\n    }\n\n    this.callBase(e);\n  }\n});\n\nvar ButtonGroup = _ui2.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      hoverStateEnabled: true,\n      focusStateEnabled: true,\n      selectionMode: \"single\",\n      selectedItems: [],\n      selectedItemKeys: [],\n      stylingMode: \"contained\",\n      keyExpr: \"text\",\n      items: [],\n      buttonTemplate: \"content\",\n      onSelectionChanged: null,\n      onItemClick: null\n    });\n  },\n  _setDeprecatedOptions: function () {\n    this.callBase();\n    (0, _extend.extend)(this._deprecatedOptions, {\n      itemTemplate: {\n        since: \"19.2\",\n        alias: \"buttonTemplate\"\n      }\n    });\n  },\n  _init: function () {\n    this.callBase();\n\n    this._createItemClickAction();\n  },\n  _createItemClickAction: function () {\n    this._itemClickAction = this._createActionByOption(\"onItemClick\");\n  },\n  _initMarkup: function () {\n    this.setAria(\"role\", \"group\");\n    this.$element().addClass(BUTTON_GROUP_CLASS);\n\n    this._renderButtons();\n\n    this._syncSelectionOptions();\n\n    this.callBase();\n  },\n  _fireSelectionChangeEvent: function (addedItems, removedItems) {\n    this._createActionByOption(\"onSelectionChanged\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    })({\n      addedItems: addedItems,\n      removedItems: removedItems\n    });\n  },\n  _renderButtons: function () {\n    var _this2 = this;\n\n    var $buttons = (0, _renderer2.default)(\"<div>\").addClass(BUTTON_GROUP_WRAPPER_CLASS).appendTo(this.$element());\n    var selectedItems = this.option(\"selectedItems\");\n    var options = {\n      selectionMode: this.option(\"selectionMode\"),\n      items: this.option(\"items\"),\n      keyExpr: this.option(\"keyExpr\"),\n      buttonTemplate: this.option(\"buttonTemplate\"),\n      scrollingEnabled: false,\n      selectedItemKeys: this.option(\"selectedItemKeys\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      activeStateEnabled: this.option(\"activeStateEnabled\"),\n      stylingMode: this.option(\"stylingMode\"),\n      accessKey: this.option(\"accessKey\"),\n      tabIndex: this.option(\"tabIndex\"),\n      noDataText: \"\",\n      selectionRequired: false,\n      onItemRendered: function (e) {\n        var width = _this2.option(\"width\");\n\n        (0, _type.isDefined)(width) && (0, _renderer2.default)(e.itemElement).addClass(BUTTON_GROUP_ITEM_HAS_WIDTH);\n      },\n      onSelectionChanged: function (e) {\n        _this2._syncSelectionOptions();\n\n        _this2._fireSelectionChangeEvent(e.addedItems, e.removedItems);\n      },\n      onItemClick: function (e) {\n        _this2._itemClickAction(e);\n      }\n    };\n\n    if ((0, _type.isDefined)(selectedItems) && selectedItems.length) {\n      options.selectedItems = selectedItems;\n    }\n\n    this._buttonsCollection = this._createComponent($buttons, ButtonCollection, options);\n  },\n  _syncSelectionOptions: function () {\n    this._setOptionWithoutOptionChange(\"selectedItems\", this._buttonsCollection.option(\"selectedItems\"));\n\n    this._setOptionWithoutOptionChange(\"selectedItemKeys\", this._buttonsCollection.option(\"selectedItemKeys\"));\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"stylingMode\":\n      case \"selectionMode\":\n      case \"keyExpr\":\n      case \"buttonTemplate\":\n      case \"items\":\n      case \"activeStateEnabled\":\n      case \"focusStateEnabled\":\n      case \"hoverStateEnabled\":\n      case \"tabIndex\":\n        this._invalidate();\n\n        break;\n\n      case \"selectedItemKeys\":\n      case \"selectedItems\":\n        this._buttonsCollection.option(args.name, args.value);\n\n        break;\n\n      case \"onItemClick\":\n        this._createItemClickAction();\n\n        break;\n\n      case \"onSelectionChanged\":\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._buttonsCollection.itemElements().toggleClass(BUTTON_GROUP_ITEM_HAS_WIDTH, !!args.value);\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\n\n(0, _component_registrator2.default)(\"dxButtonGroup\", ButtonGroup);\nmodule.exports = ButtonGroup;\nmodule.exports.default = module.exports;","map":null,"metadata":{},"sourceType":"script"}